/**
 * skylark-pdfjs-viewer - A version of video.js that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define([],function(){"use strict";var e,t,n,a,r,i,o,d,l=function(){var e,t=!1,n="data-font-name";function a(){const e=document.querySelectorAll(`span[${n}]`);for(const t of e)t.className="debuggerHideText"}function r(e,t){const a=document.querySelectorAll(`span[${n}=${e}]`);for(const e of a)e.className=t?"debuggerShowText":"debuggerHideText"}function i(e){if(e.target.dataset.fontName&&"SPAN"===e.target.tagName.toUpperCase())for(var t=e.target.dataset.fontName,n=document.getElementsByTagName("input"),a=0;a<n.length;++a){var i=n[a];i.dataset.fontName===t&&(i.checked=!i.checked,r(t,i.checked),i.scrollIntoView())}}return{id:"FontInspector",name:"Font Inspector",panel:null,manager:null,init:function(t){var n=this.panel,r=document.createElement("button");r.addEventListener("click",a),r.textContent="Refresh",n.appendChild(r),e=document.createElement("div"),n.appendChild(e)},cleanup:function(){e.textContent=""},enabled:!1,get active(){return t},set active(e){(t=e)?(document.body.addEventListener("click",i,!0),a()):(document.body.removeEventListener("click",i,!0),function(){const e=document.querySelectorAll(`span[${n}]`);for(const t of e)t.className=""}())},fontAdded:function(t,n){var i=function(e,t){for(var n=document.createElement("table"),a=0;a<t.length;a++){var r=document.createElement("tr"),i=document.createElement("td");i.textContent=t[a],r.appendChild(i);var o=document.createElement("td");o.textContent=e[t[a]].toString(),r.appendChild(o),n.appendChild(r)}return n}(t,["name","type"]);const o=t.loadedName;var d=document.createElement("div"),l=document.createElement("span");l.textContent=o;var s=document.createElement("a");n?(n=/url\(['"]?([^)"']+)/.exec(n),s.href=n[1]):t.data&&(s.href=URL.createObjectURL(new Blob([t.data],{type:t.mimeType}))),s.textContent="Download";var c=document.createElement("a");c.href="",c.textContent="Log",c.addEventListener("click",function(e){e.preventDefault(),console.log(t)});const p=document.createElement("input");p.setAttribute("type","checkbox"),p.dataset.fontName=o,p.addEventListener("click",function(){r(o,p.checked)}),d.appendChild(p),d.appendChild(l),d.appendChild(document.createTextNode(" ")),d.appendChild(s),d.appendChild(document.createTextNode(" ")),d.appendChild(c),d.appendChild(i),e.appendChild(d),setTimeout(()=>{this.active&&a()},2e3)}}}(),s=(t=[],n=null,a=null,r=null,i=Object.create(null),{id:"Stepper",name:"Stepper",panel:null,manager:null,init:function(t){var o=this;for(var d in a=document.createElement("div"),(r=document.createElement("select")).addEventListener("change",function(e){o.selectStepper(this.value)}),a.appendChild(r),n=document.createElement("div"),this.panel.appendChild(a),this.panel.appendChild(n),sessionStorage.getItem("pdfjsBreakPoints")&&(i=JSON.parse(sessionStorage.getItem("pdfjsBreakPoints"))),e=Object.create(null),t.OPS)e[t.OPS[d]]=d},cleanup:function(){r.textContent="",n.textContent="",t=[]},enabled:!1,active:!1,create:function(e){var a=document.createElement("div");a.id="stepper"+e,a.setAttribute("hidden",!0),a.className="stepper",n.appendChild(a);var o=document.createElement("option");o.textContent="Page "+(e+1),o.value=e,r.appendChild(o);var d=i[e]||[],l=new c(a,e,d);return t.push(l),1===t.length&&this.selectStepper(e,!1),l},selectStepper:function(e,n){var a;for(e|=0,n&&this.manager.selectPanel(this),a=0;a<t.length;++a){var i=t[a];i.pageIndex===e?i.panel.removeAttribute("hidden"):i.panel.setAttribute("hidden",!0)}var o=r.options;for(a=0;a<o.length;++a){var d=o[a];d.selected=(0|d.value)===e}},saveBreakPoints:function(e,t){i[e]=t,sessionStorage.setItem("pdfjsBreakPoints",JSON.stringify(i))}}),c=function(){function t(e,t){var n=document.createElement(e);return t&&(n.textContent=t),n}function n(e){if("string"==typeof e){return e.length<=75?e:e.substring(0,75)+"..."}if("object"!=typeof e||null===e)return e;if("length"in e){var t,a,r=[];for(t=0,a=Math.min(10,e.length);t<a;t++)r.push(n(e[t]));return t<e.length&&r.push("..."),r}var i={};for(var o in e)i[o]=n(e[o]);return i}function a(e,t,n){this.panel=e,this.breakPoint=0,this.nextBreakPoint=null,this.pageIndex=t,this.breakPoints=n,this.currentIdx=-1,this.operatorListIdx=0}return a.prototype={init:function(e){var n=this.panel,a=t("div","c=continue, s=step"),r=t("table");a.appendChild(r),r.cellSpacing=0;var i=t("tr");r.appendChild(i),i.appendChild(t("th","Break")),i.appendChild(t("th","Idx")),i.appendChild(t("th","fn")),i.appendChild(t("th","args")),n.appendChild(a),this.table=r,this.updateOperatorList(e)},updateOperatorList:function(a){var r=this;function i(){var e=+this.dataset.idx;this.checked?r.breakPoints.push(e):r.breakPoints.splice(r.breakPoints.indexOf(e),1),s.saveBreakPoints(r.pageIndex,r.breakPoints)}if(!(this.operatorListIdx>15e3)){for(var o=document.createDocumentFragment(),d=Math.min(15e3,a.fnArray.length),l=this.operatorListIdx;l<d;l++){var c=t("tr");c.className="line",c.dataset.idx=l,o.appendChild(c);var p=this.breakPoints.includes(l),u=a.argsArray[l]||[],h=t("td"),m=t("input");m.type="checkbox",m.className="points",m.checked=p,m.dataset.idx=l,m.onclick=i,h.appendChild(m),c.appendChild(h),c.appendChild(t("td",l.toString()));var v=e[a.fnArray[l]],f=u;if("showText"===v){for(var g=u[0],C=[],b=[],x=0;x<g.length;x++){var k=g[x];"object"==typeof k&&null!==k?b.push(k.fontChar):(b.length>0&&(C.push(b.join("")),b=[]),C.push(k))}b.length>0&&C.push(b.join("")),f=[C]}c.appendChild(t("td",v)),c.appendChild(t("td",JSON.stringify(n(f))))}if(d<a.fnArray.length){var E=t("td","...");E.colspan=4,o.appendChild(E)}this.operatorListIdx=a.fnArray.length,this.table.appendChild(o)}},getNextBreakPoint:function(){this.breakPoints.sort(function(e,t){return e-t});for(var e=0;e<this.breakPoints.length;e++)if(this.breakPoints[e]>this.currentIdx)return this.breakPoints[e];return null},breakIt:function(e,t){s.selectStepper(this.pageIndex,!0);var n=this,a=document;n.currentIdx=e;var r=function(e){switch(e.keyCode){case 83:a.removeEventListener("keydown",r),n.nextBreakPoint=n.currentIdx+1,n.goTo(-1),t();break;case 67:a.removeEventListener("keydown",r);var i=n.getNextBreakPoint();n.nextBreakPoint=i,n.goTo(-1),t()}};a.addEventListener("keydown",r),n.goTo(e)},goTo:function(e){for(var t=this.panel.getElementsByClassName("line"),n=0,a=t.length;n<a;++n){var r=t[n];(0|r.dataset.idx)===e?(r.style.backgroundColor="rgb(251,250,207)",r.scrollIntoView()):r.style.backgroundColor=null}}},a}(),p=function(){var e=[];function t(e){for(;e.hasChildNodes();)e.removeChild(e.lastChild)}return{id:"Stats",name:"Stats",panel:null,manager:null,init(e){},enabled:!1,active:!1,add(n,a){if(a){var r=function(t){for(var n=0,a=e.length;n<a;++n)if(e[n].pageNumber===t)return n;return!1}(n);if(!1!==r){const t=e[r];this.panel.removeChild(t.div),e.splice(r,1)}var i=document.createElement("div");i.className="stats";var o=document.createElement("div");o.className="title",o.textContent="Page: "+n;var d=document.createElement("div");d.textContent=a.toString(),i.appendChild(o),i.appendChild(d),e.push({pageNumber:n,div:i}),e.sort(function(e,t){return e.pageNumber-t.pageNumber}),t(this.panel);for(var l=0,s=e.length;l<s;++l)this.panel.appendChild(e[l].div)}},cleanup(){e=[],t(this.panel)}}}();return window.PDFBug=(o=[],d=null,{tools:[l,s,p],enable(e){var t=!1,n=this.tools;1===e.length&&"all"===e[0]&&(t=!0);for(var a=0;a<n.length;++a){var r=n[a];(t||e.includes(r.id))&&(r.enabled=!0)}t||n.sort(function(t,a){var r=e.indexOf(t.id);r=r<0?n.length:r;var i=e.indexOf(a.id);return r-(i=i<0?n.length:i)})},init(e,t){var n=document.createElement("div");n.id="PDFBug";var a=document.createElement("div");a.setAttribute("class","controls"),n.appendChild(a);var r=document.createElement("div");r.setAttribute("class","panels"),n.appendChild(r),t.appendChild(n),t.style.right="300px";for(var i=this.tools,d=this,l=0;l<i.length;++l){var s=i[l],c=document.createElement("div"),p=document.createElement("button");p.textContent=s.name,p.addEventListener("click",function(e){return function(t){t.preventDefault(),d.selectPanel(e)}}(l)),a.appendChild(p),r.appendChild(c),s.panel=c,s.manager=this,s.enabled?s.init(e):c.textContent=s.name+' is disabled. To enable add  "'+s.id+'" to the pdfBug parameter and refresh (separate multiple by commas).',o.push(p)}this.selectPanel(0)},cleanup(){for(var e=0,t=this.tools.length;e<t;e++)this.tools[e].enabled&&this.tools[e].cleanup()},selectPanel(e){if("number"!=typeof e&&(e=this.tools.indexOf(e)),e!==d){d=e;for(var t=this.tools,n=0;n<t.length;++n)n===e?(o[n].setAttribute("class","active"),t[n].active=!0,t[n].panel.removeAttribute("hidden")):(o[n].setAttribute("class",""),t[n].active=!1,t[n].panel.setAttribute("hidden","true"))}}}),{PDFBug:window.PDFBug}});
//# sourceMappingURL=sourcemaps/debugger.js.map
