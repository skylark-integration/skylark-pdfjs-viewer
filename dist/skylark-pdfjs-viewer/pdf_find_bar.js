/**
 * skylark-pdfjs-viewer - A version of video.js that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["./pdfjs_dev","./ui_utils","./pdf_find_controller"],function(t,e,i){const{FindState:s}=i,{NullL10n:n}=e,h=1e3;return{PDFFindBar:class{constructor(t,e,i=n){this.opened=!1,this.bar=t.bar||null,this.toggleButton=t.toggleButton||null,this.findField=t.findField||null,this.highlightAll=t.highlightAllCheckbox||null,this.caseSensitive=t.caseSensitiveCheckbox||null,this.entireWord=t.entireWordCheckbox||null,this.findMsg=t.findMsg||null,this.findResultsCount=t.findResultsCount||null,this.findPreviousButton=t.findPreviousButton||null,this.findNextButton=t.findNextButton||null,this.eventBus=e,this.l10n=i,this.toggleButton.addEventListener("click",()=>{this.toggle()}),this.findField.addEventListener("input",()=>{this.dispatchEvent("")}),this.bar.addEventListener("keydown",t=>{switch(t.keyCode){case 13:t.target===this.findField&&this.dispatchEvent("again",t.shiftKey);break;case 27:this.close()}}),this.findPreviousButton.addEventListener("click",()=>{this.dispatchEvent("again",!0)}),this.findNextButton.addEventListener("click",()=>{this.dispatchEvent("again",!1)}),this.highlightAll.addEventListener("click",()=>{this.dispatchEvent("highlightallchange")}),this.caseSensitive.addEventListener("click",()=>{this.dispatchEvent("casesensitivitychange")}),this.entireWord.addEventListener("click",()=>{this.dispatchEvent("entirewordchange")}),this.eventBus._on("resize",this._adjustWidth.bind(this))}reset(){this.updateUIState()}dispatchEvent(t,e){this.eventBus.dispatch("find",{source:this,type:t,query:this.findField.value,phraseSearch:!0,caseSensitive:this.caseSensitive.checked,entireWord:this.entireWord.checked,highlightAll:this.highlightAll.checked,findPrevious:e})}updateUIState(t,e,i){let n="",h="";switch(t){case s.FOUND:break;case s.PENDING:h="pending";break;case s.NOT_FOUND:n=this.l10n.get("find_not_found",null,"Phrase not found"),h="notFound";break;case s.WRAPPED:n=e?this.l10n.get("find_reached_top",null,"Reached top of document, continued from bottom"):this.l10n.get("find_reached_bottom",null,"Reached end of document, continued from top")}this.findField.setAttribute("data-status",h),Promise.resolve(n).then(t=>{this.findMsg.textContent=t,this._adjustWidth()}),this.updateResultsCount(i)}updateResultsCount({current:e=0,total:i=0}={}){if(!this.findResultsCount)return;const s=h;let n="";i>0&&(n=i>s?void 0!==t&&t.test("MOZCENTRAL")?this.l10n.get("find_match_count_limit[other]",{limit:s},"More than {{limit}} matches"):this.l10n.get("find_match_count_limit",{limit:s},"More than {{limit}} match"+(1!==s?"es":"")):void 0!==t&&t.test("MOZCENTRAL")?this.l10n.get("find_match_count[other]",{current:e,total:i},"{{current}} of {{total}} matches"):this.l10n.get("find_match_count",{current:e,total:i},"{{current}} of {{total}} match"+(1!==i?"es":""))),Promise.resolve(n).then(t=>{this.findResultsCount.textContent=t,this.findResultsCount.classList.toggle("hidden",!i),this._adjustWidth()})}open(){this.opened||(this.opened=!0,this.toggleButton.classList.add("toggled"),this.bar.classList.remove("hidden")),this.findField.select(),this.findField.focus(),this._adjustWidth()}close(){this.opened&&(this.opened=!1,this.toggleButton.classList.remove("toggled"),this.bar.classList.add("hidden"),this.eventBus.dispatch("findbarclose",{source:this}))}toggle(){this.opened?this.close():this.open()}_adjustWidth(){this.opened&&(this.bar.classList.remove("wrapContainers"),this.bar.clientHeight>this.bar.firstElementChild.clientHeight&&this.bar.classList.add("wrapContainers"))}}}});
//# sourceMappingURL=sourcemaps/pdf_find_bar.js.map
