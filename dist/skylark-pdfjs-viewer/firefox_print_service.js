/**
 * skylark-pdfjs-viewer - A version of video.js that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["skylark-pdfjs-display","./ui_utils","./app"],function(t,n,e){const{RenderingCancelledException:o,shadow:i}=t,{CSS_UNITS:r}=n,{PDFPrintServiceFactory:a}=e;function l(t,n,e,i,a,l){const c=document.createElement("canvas"),s=a/72;c.width=Math.floor(e.width*s),c.height=Math.floor(e.height*s),c.style.width=Math.floor(e.width*r)+"px",c.style.height=Math.floor(e.height*r)+"px";const p=document.createElement("div");p.appendChild(c),i.appendChild(p);let u=null;c.mozPrintCallback=function(i){const r=i.context;r.save(),r.fillStyle="rgb(255, 255, 255)",r.fillRect(0,0,c.width,c.height),r.restore();let a=null;t.getPage(n).then(function(n){u&&(u.cancel(),u=null);const o={canvasContext:r,transform:[s,0,0,s,0,0],viewport:n.getViewport({scale:1,rotation:e.rotation}),intent:"print",annotationStorage:t.annotationStorage,optionalContentConfigPromise:l};return u=a=n.render(o),a.promise}).then(function(){u===a&&(u=null),i.done()},function(t){t instanceof o||console.error(t),u===a&&(u.cancel(),u=null),"abort"in i?i.abort():i.done()})}}function c(t,n,e,o,i=null){this.pdfDocument=t,this.pagesOverview=n,this.printContainer=e,this._printResolution=o||150,this._optionalContentConfigPromise=i||t.getOptionalContentConfig()}return c.prototype={layout(){const{pdfDocument:t,pagesOverview:n,printContainer:e,_printResolution:o,_optionalContentConfigPromise:i}=this;document.querySelector("body").setAttribute("data-pdfjsprinting",!0);for(let r=0,a=n.length;r<a;++r)l(t,r+1,n[r],e,o,i)},destroy(){this.printContainer.textContent="",document.querySelector("body").removeAttribute("data-pdfjsprinting")}},a.instance={get supportsPrinting(){const t=document.createElement("canvas");return i(this,"supportsPrinting","mozPrintCallback"in t)},createPrintService:(t,n,e,o,i)=>new c(t,n,e,o,i)},{FirefoxPrintService:c}});
//# sourceMappingURL=sourcemaps/firefox_print_service.js.map
