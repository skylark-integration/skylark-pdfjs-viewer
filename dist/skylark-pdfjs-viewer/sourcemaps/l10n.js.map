{"version":3,"sources":["l10n.js"],"names":["define","document","webL10n","window","undefined","gL10nData","gTextData","gTextProp","gLanguage","gMacros","gReadyState","gAsyncResourceLoading","xhrLoadText","url","onSuccess","onFailure","data","xhr","XMLHttpRequest","open","overrideMimeType","onreadystatechange","readyState","status","responseText","onerror","ontimeout","send","e","parseResource","href","lang","successCallback","failureCallback","baseURL","replace","response","text","parsedPropertiesCallback","dictionary","reBlank","reComment","reSection","reImport","reSplit","parseRawLines","rawText","extendedSyntax","parsedRawLinesCallback","entries","split","currentLang","genericLang","skipLang","match","nextEntry","length","line","shift","test","exec","toLowerCase","loadImport","tmp","lastIndexOf","callback","content","console","warn","parseProperties","key","id","prop","index","substring","loadLocale","langLinks","querySelectorAll","langCount","script","onResourceLoaded","gResourceCount","i","L10nResourceLink","load","dict","querySelector","JSON","parse","innerHTML","locales","default_locale","log","defaultLocale","anyCaseLang","link","this","getL10nData","args","fallback","rv","str","substArguments","substIndexes","reMatch","param","macroName","paramName","macro","matched_text","arg","translateElement","element","l10n","l10nId","getAttribute","l10nArgs","getL10nAttributes","children","childElementCount","count","childNodes","nodeType","getChildElementCount","found","l","nodeValue","textNode","createTextNode","insertBefore","firstChild","k","plural","n","parseFloat","isNaN","_pluralRules","isIn","list","indexOf","isBetween","start","end","pluralRules","0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","af","ak","am","ar","asa","az","be","bem","bez","bg","bh","bm","bn","bo","br","brx","bs","ca","cgg","chr","cs","cy","da","de","dv","dz","ee","el","en","eo","es","et","eu","fa","ff","fi","fil","fo","fr","fur","fy","ga","gd","gl","gsw","gu","guw","gv","ha","haw","he","hi","hr","hu","ig","ii","is","it","iu","ja","jmc","jv","ka","kab","kaj","kcg","kde","kea","kk","kl","km","kn","ko","ksb","ksh","ku","kw","lag","lb","lg","ln","lo","lt","lv","mas","mg","mk","ml","mn","mo","mr","ms","mt","my","nah","naq","nb","nd","ne","nl","nn","no","nr","nso","ny","nyn","om","or","pa","pap","pl","ps","pt","rm","ro","rof","ru","rwk","sah","saq","se","seh","ses","sg","sh","shi","sk","sl","sma","smi","smj","smn","sms","sn","so","sq","sr","ss","ssy","st","sv","sw","syr","ta","te","teo","th","ti","tig","tk","tl","tn","to","tr","ts","tzm","uk","ur","ve","vi","vun","wa","wae","wo","xh","xog","yo","zh","zu","getPluralRules","get","fallbackString","getData","getText","getLanguage","setLanguage","getDirection","shortCode","translate","getTranslatableChildren","documentElement","elementCount","getReadyState","ready","setTimeout","addEventListener","once","removeEventListener"],"mappings":"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","file":"../l10n.js","sourcesContent":["define([],function(){\r\n  /**\r\n   * Copyright (c) 2011-2013 Fabien Cazenave, Mozilla.\r\n   *\r\n   * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n   * of this software and associated documentation files (the \"Software\"), to\r\n   * deal in the Software without restriction, including without limitation the\r\n   * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\r\n   * sell copies of the Software, and to permit persons to whom the Software is\r\n   * furnished to do so, subject to the following conditions:\r\n   *\r\n   * The above copyright notice and this permission notice shall be included in\r\n   * all copies or substantial portions of the Software.\r\n   *\r\n   * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\r\n   * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\r\n   * IN THE SOFTWARE.\r\n   */\r\n  /*\r\n    Additional modifications for PDF.js project:\r\n      - Disables language initialization on page loading.\r\n      - Disables document translation on page loading.\r\n      - Removes consoleWarn and consoleLog and use console.log/warn directly.\r\n      - Removes window._ assignment.\r\n      - Remove compatibility code for OldIE.\r\n      - Replaces `String.prototype.substr()` with `String.prototype.substring()`.\r\n      - Removes `fireL10nReadyEvent` since the \"localized\" event it dispatches\r\n        is unused and may clash with an identically named event in the viewer.\r\n  */\r\n\r\n  /*jshint browser: true, devel: true, es5: true, globalstrict: true */\r\n  'use strict';\r\n\r\n  return document.webL10n = (function(window, document, undefined) {\r\n    var gL10nData = {};\r\n    var gTextData = '';\r\n    var gTextProp = 'textContent';\r\n    var gLanguage = '';\r\n    var gMacros = {};\r\n    var gReadyState = 'loading';\r\n\r\n\r\n    /**\r\n     * Synchronously loading l10n resources significantly minimizes flickering\r\n     * from displaying the app with non-localized strings and then updating the\r\n     * strings. Although this will block all script execution on this page, we\r\n     * expect that the l10n resources are available locally on flash-storage.\r\n     *\r\n     * As synchronous XHR is generally considered as a bad idea, we're still\r\n     * loading l10n resources asynchronously -- but we keep this in a setting,\r\n     * just in case... and applications using this library should hide their\r\n     * content until the `localized' event happens.\r\n     */\r\n\r\n    var gAsyncResourceLoading = true; // read-only\r\n\r\n\r\n    /**\r\n     * DOM helpers for the so-called \"HTML API\".\r\n     *\r\n     * These functions are written for modern browsers. For old versions of IE,\r\n     * they're overridden in the 'startup' section at the end of this file.\r\n     */\r\n\r\n    function getL10nResourceLinks() {\r\n      return document.querySelectorAll('link[type=\"application/l10n\"]');\r\n    }\r\n\r\n    function getL10nDictionary() {\r\n      var script = document.querySelector('script[type=\"application/l10n\"]');\r\n      // TODO: support multiple and external JSON dictionaries\r\n      return script ? JSON.parse(script.innerHTML) : null;\r\n    }\r\n\r\n    function getTranslatableChildren(element) {\r\n      return element ? element.querySelectorAll('*[data-l10n-id]') : [];\r\n    }\r\n\r\n    function getL10nAttributes(element) {\r\n      if (!element)\r\n        return {};\r\n\r\n      var l10nId = element.getAttribute('data-l10n-id');\r\n      var l10nArgs = element.getAttribute('data-l10n-args');\r\n      var args = {};\r\n      if (l10nArgs) {\r\n        try {\r\n          args = JSON.parse(l10nArgs);\r\n        } catch (e) {\r\n          console.warn('could not parse arguments for #' + l10nId);\r\n        }\r\n      }\r\n      return { id: l10nId, args: args };\r\n    }\r\n\r\n    function xhrLoadText(url, onSuccess, onFailure) {\r\n      onSuccess = onSuccess || function _onSuccess(data) {};\r\n      onFailure = onFailure || function _onFailure() {};\r\n\r\n      var xhr = new XMLHttpRequest();\r\n      xhr.open('GET', url, gAsyncResourceLoading);\r\n      if (xhr.overrideMimeType) {\r\n        xhr.overrideMimeType('text/plain; charset=utf-8');\r\n      }\r\n      xhr.onreadystatechange = function() {\r\n        if (xhr.readyState == 4) {\r\n          if (xhr.status == 200 || xhr.status === 0) {\r\n            onSuccess(xhr.responseText);\r\n          } else {\r\n            onFailure();\r\n          }\r\n        }\r\n      };\r\n      xhr.onerror = onFailure;\r\n      xhr.ontimeout = onFailure;\r\n\r\n      // in Firefox OS with the app:// protocol, trying to XHR a non-existing\r\n      // URL will raise an exception here -- hence this ugly try...catch.\r\n      try {\r\n        xhr.send(null);\r\n      } catch (e) {\r\n        onFailure();\r\n      }\r\n    }\r\n\r\n\r\n    /**\r\n     * l10n resource parser:\r\n     *  - reads (async XHR) the l10n resource matching `lang';\r\n     *  - imports linked resources (synchronously) when specified;\r\n     *  - parses the text data (fills `gL10nData' and `gTextData');\r\n     *  - triggers success/failure callbacks when done.\r\n     *\r\n     * @param {string} href\r\n     *    URL of the l10n resource to parse.\r\n     *\r\n     * @param {string} lang\r\n     *    locale (language) to parse. Must be a lowercase string.\r\n     *\r\n     * @param {Function} successCallback\r\n     *    triggered when the l10n resource has been successfully parsed.\r\n     *\r\n     * @param {Function} failureCallback\r\n     *    triggered when the an error has occurred.\r\n     *\r\n     * @return {void}\r\n     *    uses the following global variables: gL10nData, gTextData, gTextProp.\r\n     */\r\n\r\n    function parseResource(href, lang, successCallback, failureCallback) {\r\n      var baseURL = href.replace(/[^\\/]*$/, '') || './';\r\n\r\n      // handle escaped characters (backslashes) in a string\r\n      function evalString(text) {\r\n        if (text.lastIndexOf('\\\\') < 0)\r\n          return text;\r\n        return text.replace(/\\\\\\\\/g, '\\\\')\r\n                   .replace(/\\\\n/g, '\\n')\r\n                   .replace(/\\\\r/g, '\\r')\r\n                   .replace(/\\\\t/g, '\\t')\r\n                   .replace(/\\\\b/g, '\\b')\r\n                   .replace(/\\\\f/g, '\\f')\r\n                   .replace(/\\\\{/g, '{')\r\n                   .replace(/\\\\}/g, '}')\r\n                   .replace(/\\\\\"/g, '\"')\r\n                   .replace(/\\\\'/g, \"'\");\r\n      }\r\n\r\n      // parse *.properties text data into an l10n dictionary\r\n      // If gAsyncResourceLoading is false, then the callback will be called\r\n      // synchronously. Otherwise it is called asynchronously.\r\n      function parseProperties(text, parsedPropertiesCallback) {\r\n        var dictionary = {};\r\n\r\n        // token expressions\r\n        var reBlank = /^\\s*|\\s*$/;\r\n        var reComment = /^\\s*#|^\\s*$/;\r\n        var reSection = /^\\s*\\[(.*)\\]\\s*$/;\r\n        var reImport = /^\\s*@import\\s+url\\((.*)\\)\\s*$/i;\r\n        var reSplit = /^([^=\\s]*)\\s*=\\s*(.+)$/; // TODO: escape EOLs with '\\'\r\n\r\n        // parse the *.properties file into an associative array\r\n        function parseRawLines(rawText, extendedSyntax, parsedRawLinesCallback) {\r\n          var entries = rawText.replace(reBlank, '').split(/[\\r\\n]+/);\r\n          var currentLang = '*';\r\n          var genericLang = lang.split('-', 1)[0];\r\n          var skipLang = false;\r\n          var match = '';\r\n\r\n          function nextEntry() {\r\n            // Use infinite loop instead of recursion to avoid reaching the\r\n            // maximum recursion limit for content with many lines.\r\n            while (true) {\r\n              if (!entries.length) {\r\n                parsedRawLinesCallback();\r\n                return;\r\n              }\r\n              var line = entries.shift();\r\n\r\n              // comment or blank line?\r\n              if (reComment.test(line))\r\n                continue;\r\n\r\n              // the extended syntax supports [lang] sections and @import rules\r\n              if (extendedSyntax) {\r\n                match = reSection.exec(line);\r\n                if (match) { // section start?\r\n                  // RFC 4646, section 4.4, \"All comparisons MUST be performed\r\n                  // in a case-insensitive manner.\"\r\n\r\n                  currentLang = match[1].toLowerCase();\r\n                  skipLang = (currentLang !== '*') &&\r\n                      (currentLang !== lang) && (currentLang !== genericLang);\r\n                  continue;\r\n                } else if (skipLang) {\r\n                  continue;\r\n                }\r\n                match = reImport.exec(line);\r\n                if (match) { // @import rule?\r\n                  loadImport(baseURL + match[1], nextEntry);\r\n                  return;\r\n                }\r\n              }\r\n\r\n              // key-value pair\r\n              var tmp = line.match(reSplit);\r\n              if (tmp && tmp.length == 3) {\r\n                dictionary[tmp[1]] = evalString(tmp[2]);\r\n              }\r\n            }\r\n          }\r\n          nextEntry();\r\n        }\r\n\r\n        // import another *.properties file\r\n        function loadImport(url, callback) {\r\n          xhrLoadText(url, function(content) {\r\n            parseRawLines(content, false, callback); // don't allow recursive imports\r\n          }, function () {\r\n            console.warn(url + ' not found.');\r\n            callback();\r\n          });\r\n        }\r\n\r\n        // fill the dictionary\r\n        parseRawLines(text, true, function() {\r\n          parsedPropertiesCallback(dictionary);\r\n        });\r\n      }\r\n\r\n      // load and parse l10n data (warning: global variables are used here)\r\n      xhrLoadText(href, function(response) {\r\n        gTextData += response; // mostly for debug\r\n\r\n        // parse *.properties text data into an l10n dictionary\r\n        parseProperties(response, function(data) {\r\n\r\n          // find attribute descriptions, if any\r\n          for (var key in data) {\r\n            var id, prop, index = key.lastIndexOf('.');\r\n            if (index > 0) { // an attribute has been specified\r\n              id = key.substring(0, index);\r\n              prop = key.substring(index + 1);\r\n            } else { // no attribute: assuming text content by default\r\n              id = key;\r\n              prop = gTextProp;\r\n            }\r\n            if (!gL10nData[id]) {\r\n              gL10nData[id] = {};\r\n            }\r\n            gL10nData[id][prop] = data[key];\r\n          }\r\n\r\n          // trigger callback\r\n          if (successCallback) {\r\n            successCallback();\r\n          }\r\n        });\r\n      }, failureCallback);\r\n    }\r\n\r\n    // load and parse all resources for the specified locale\r\n    function loadLocale(lang, callback) {\r\n      // RFC 4646, section 2.1 states that language tags have to be treated as\r\n      // case-insensitive. Convert to lowercase for case-insensitive comparisons.\r\n      if (lang) {\r\n        lang = lang.toLowerCase();\r\n      }\r\n\r\n      callback = callback || function _callback() {};\r\n\r\n      clear();\r\n      gLanguage = lang;\r\n\r\n      // check all <link type=\"application/l10n\" href=\"...\" /> nodes\r\n      // and load the resource files\r\n      var langLinks = getL10nResourceLinks();\r\n      var langCount = langLinks.length;\r\n      if (langCount === 0) {\r\n        // we might have a pre-compiled dictionary instead\r\n        var dict = getL10nDictionary();\r\n        if (dict && dict.locales && dict.default_locale) {\r\n          console.log('using the embedded JSON directory, early way out');\r\n          gL10nData = dict.locales[lang];\r\n          if (!gL10nData) {\r\n            var defaultLocale = dict.default_locale.toLowerCase();\r\n            for (var anyCaseLang in dict.locales) {\r\n              anyCaseLang = anyCaseLang.toLowerCase();\r\n              if (anyCaseLang === lang) {\r\n                gL10nData = dict.locales[lang];\r\n                break;\r\n              } else if (anyCaseLang === defaultLocale) {\r\n                gL10nData = dict.locales[defaultLocale];\r\n              }\r\n            }\r\n          }\r\n          callback();\r\n        } else {\r\n          console.log('no resource to load, early way out');\r\n        }\r\n        // early way out\r\n        gReadyState = 'complete';\r\n        return;\r\n      }\r\n\r\n      // start the callback when all resources are loaded\r\n      var onResourceLoaded = null;\r\n      var gResourceCount = 0;\r\n      onResourceLoaded = function() {\r\n        gResourceCount++;\r\n        if (gResourceCount >= langCount) {\r\n          callback();\r\n          gReadyState = 'complete';\r\n        }\r\n      };\r\n\r\n      // load all resource files\r\n      function L10nResourceLink(link) {\r\n        var href = link.href;\r\n        // Note: If |gAsyncResourceLoading| is false, then the following callbacks\r\n        // are synchronously called.\r\n        this.load = function(lang, callback) {\r\n          parseResource(href, lang, callback, function() {\r\n            console.warn(href + ' not found.');\r\n            // lang not found, used default resource instead\r\n            console.warn('\"' + lang + '\" resource not found');\r\n            gLanguage = '';\r\n            // Resource not loaded, but we still need to call the callback.\r\n            callback();\r\n          });\r\n        };\r\n      }\r\n\r\n      for (var i = 0; i < langCount; i++) {\r\n        var resource = new L10nResourceLink(langLinks[i]);\r\n        resource.load(lang, onResourceLoaded);\r\n      }\r\n    }\r\n\r\n    // clear all l10n data\r\n    function clear() {\r\n      gL10nData = {};\r\n      gTextData = '';\r\n      gLanguage = '';\r\n      // TODO: clear all non predefined macros.\r\n      // There's no such macro /yet/ but we're planning to have some...\r\n    }\r\n\r\n\r\n    /**\r\n     * Get rules for plural forms (shared with JetPack), see:\r\n     * http://unicode.org/repos/cldr-tmp/trunk/diff/supplemental/language_plural_rules.html\r\n     * https://github.com/mozilla/addon-sdk/blob/master/python-lib/plural-rules-generator.p\r\n     *\r\n     * @param {string} lang\r\n     *    locale (language) used.\r\n     *\r\n     * @return {Function}\r\n     *    returns a function that gives the plural form name for a given integer:\r\n     *       var fun = getPluralRules('en');\r\n     *       fun(1)    -> 'one'\r\n     *       fun(0)    -> 'other'\r\n     *       fun(1000) -> 'other'.\r\n     */\r\n\r\n    function getPluralRules(lang) {\r\n      var locales2rules = {\r\n        'af': 3,\r\n        'ak': 4,\r\n        'am': 4,\r\n        'ar': 1,\r\n        'asa': 3,\r\n        'az': 0,\r\n        'be': 11,\r\n        'bem': 3,\r\n        'bez': 3,\r\n        'bg': 3,\r\n        'bh': 4,\r\n        'bm': 0,\r\n        'bn': 3,\r\n        'bo': 0,\r\n        'br': 20,\r\n        'brx': 3,\r\n        'bs': 11,\r\n        'ca': 3,\r\n        'cgg': 3,\r\n        'chr': 3,\r\n        'cs': 12,\r\n        'cy': 17,\r\n        'da': 3,\r\n        'de': 3,\r\n        'dv': 3,\r\n        'dz': 0,\r\n        'ee': 3,\r\n        'el': 3,\r\n        'en': 3,\r\n        'eo': 3,\r\n        'es': 3,\r\n        'et': 3,\r\n        'eu': 3,\r\n        'fa': 0,\r\n        'ff': 5,\r\n        'fi': 3,\r\n        'fil': 4,\r\n        'fo': 3,\r\n        'fr': 5,\r\n        'fur': 3,\r\n        'fy': 3,\r\n        'ga': 8,\r\n        'gd': 24,\r\n        'gl': 3,\r\n        'gsw': 3,\r\n        'gu': 3,\r\n        'guw': 4,\r\n        'gv': 23,\r\n        'ha': 3,\r\n        'haw': 3,\r\n        'he': 2,\r\n        'hi': 4,\r\n        'hr': 11,\r\n        'hu': 0,\r\n        'id': 0,\r\n        'ig': 0,\r\n        'ii': 0,\r\n        'is': 3,\r\n        'it': 3,\r\n        'iu': 7,\r\n        'ja': 0,\r\n        'jmc': 3,\r\n        'jv': 0,\r\n        'ka': 0,\r\n        'kab': 5,\r\n        'kaj': 3,\r\n        'kcg': 3,\r\n        'kde': 0,\r\n        'kea': 0,\r\n        'kk': 3,\r\n        'kl': 3,\r\n        'km': 0,\r\n        'kn': 0,\r\n        'ko': 0,\r\n        'ksb': 3,\r\n        'ksh': 21,\r\n        'ku': 3,\r\n        'kw': 7,\r\n        'lag': 18,\r\n        'lb': 3,\r\n        'lg': 3,\r\n        'ln': 4,\r\n        'lo': 0,\r\n        'lt': 10,\r\n        'lv': 6,\r\n        'mas': 3,\r\n        'mg': 4,\r\n        'mk': 16,\r\n        'ml': 3,\r\n        'mn': 3,\r\n        'mo': 9,\r\n        'mr': 3,\r\n        'ms': 0,\r\n        'mt': 15,\r\n        'my': 0,\r\n        'nah': 3,\r\n        'naq': 7,\r\n        'nb': 3,\r\n        'nd': 3,\r\n        'ne': 3,\r\n        'nl': 3,\r\n        'nn': 3,\r\n        'no': 3,\r\n        'nr': 3,\r\n        'nso': 4,\r\n        'ny': 3,\r\n        'nyn': 3,\r\n        'om': 3,\r\n        'or': 3,\r\n        'pa': 3,\r\n        'pap': 3,\r\n        'pl': 13,\r\n        'ps': 3,\r\n        'pt': 3,\r\n        'rm': 3,\r\n        'ro': 9,\r\n        'rof': 3,\r\n        'ru': 11,\r\n        'rwk': 3,\r\n        'sah': 0,\r\n        'saq': 3,\r\n        'se': 7,\r\n        'seh': 3,\r\n        'ses': 0,\r\n        'sg': 0,\r\n        'sh': 11,\r\n        'shi': 19,\r\n        'sk': 12,\r\n        'sl': 14,\r\n        'sma': 7,\r\n        'smi': 7,\r\n        'smj': 7,\r\n        'smn': 7,\r\n        'sms': 7,\r\n        'sn': 3,\r\n        'so': 3,\r\n        'sq': 3,\r\n        'sr': 11,\r\n        'ss': 3,\r\n        'ssy': 3,\r\n        'st': 3,\r\n        'sv': 3,\r\n        'sw': 3,\r\n        'syr': 3,\r\n        'ta': 3,\r\n        'te': 3,\r\n        'teo': 3,\r\n        'th': 0,\r\n        'ti': 4,\r\n        'tig': 3,\r\n        'tk': 3,\r\n        'tl': 4,\r\n        'tn': 3,\r\n        'to': 0,\r\n        'tr': 0,\r\n        'ts': 3,\r\n        'tzm': 22,\r\n        'uk': 11,\r\n        'ur': 3,\r\n        've': 3,\r\n        'vi': 0,\r\n        'vun': 3,\r\n        'wa': 4,\r\n        'wae': 3,\r\n        'wo': 0,\r\n        'xh': 3,\r\n        'xog': 3,\r\n        'yo': 0,\r\n        'zh': 0,\r\n        'zu': 3\r\n      };\r\n\r\n      // utility functions for plural rules methods\r\n      function isIn(n, list) {\r\n        return list.indexOf(n) !== -1;\r\n      }\r\n      function isBetween(n, start, end) {\r\n        return start <= n && n <= end;\r\n      }\r\n\r\n      // list of all plural rules methods:\r\n      // map an integer to the plural form name to use\r\n      var pluralRules = {\r\n        '0': function(n) {\r\n          return 'other';\r\n        },\r\n        '1': function(n) {\r\n          if ((isBetween((n % 100), 3, 10)))\r\n            return 'few';\r\n          if (n === 0)\r\n            return 'zero';\r\n          if ((isBetween((n % 100), 11, 99)))\r\n            return 'many';\r\n          if (n == 2)\r\n            return 'two';\r\n          if (n == 1)\r\n            return 'one';\r\n          return 'other';\r\n        },\r\n        '2': function(n) {\r\n          if (n !== 0 && (n % 10) === 0)\r\n            return 'many';\r\n          if (n == 2)\r\n            return 'two';\r\n          if (n == 1)\r\n            return 'one';\r\n          return 'other';\r\n        },\r\n        '3': function(n) {\r\n          if (n == 1)\r\n            return 'one';\r\n          return 'other';\r\n        },\r\n        '4': function(n) {\r\n          if ((isBetween(n, 0, 1)))\r\n            return 'one';\r\n          return 'other';\r\n        },\r\n        '5': function(n) {\r\n          if ((isBetween(n, 0, 2)) && n != 2)\r\n            return 'one';\r\n          return 'other';\r\n        },\r\n        '6': function(n) {\r\n          if (n === 0)\r\n            return 'zero';\r\n          if ((n % 10) == 1 && (n % 100) != 11)\r\n            return 'one';\r\n          return 'other';\r\n        },\r\n        '7': function(n) {\r\n          if (n == 2)\r\n            return 'two';\r\n          if (n == 1)\r\n            return 'one';\r\n          return 'other';\r\n        },\r\n        '8': function(n) {\r\n          if ((isBetween(n, 3, 6)))\r\n            return 'few';\r\n          if ((isBetween(n, 7, 10)))\r\n            return 'many';\r\n          if (n == 2)\r\n            return 'two';\r\n          if (n == 1)\r\n            return 'one';\r\n          return 'other';\r\n        },\r\n        '9': function(n) {\r\n          if (n === 0 || n != 1 && (isBetween((n % 100), 1, 19)))\r\n            return 'few';\r\n          if (n == 1)\r\n            return 'one';\r\n          return 'other';\r\n        },\r\n        '10': function(n) {\r\n          if ((isBetween((n % 10), 2, 9)) && !(isBetween((n % 100), 11, 19)))\r\n            return 'few';\r\n          if ((n % 10) == 1 && !(isBetween((n % 100), 11, 19)))\r\n            return 'one';\r\n          return 'other';\r\n        },\r\n        '11': function(n) {\r\n          if ((isBetween((n % 10), 2, 4)) && !(isBetween((n % 100), 12, 14)))\r\n            return 'few';\r\n          if ((n % 10) === 0 ||\r\n              (isBetween((n % 10), 5, 9)) ||\r\n              (isBetween((n % 100), 11, 14)))\r\n            return 'many';\r\n          if ((n % 10) == 1 && (n % 100) != 11)\r\n            return 'one';\r\n          return 'other';\r\n        },\r\n        '12': function(n) {\r\n          if ((isBetween(n, 2, 4)))\r\n            return 'few';\r\n          if (n == 1)\r\n            return 'one';\r\n          return 'other';\r\n        },\r\n        '13': function(n) {\r\n          if ((isBetween((n % 10), 2, 4)) && !(isBetween((n % 100), 12, 14)))\r\n            return 'few';\r\n          if (n != 1 && (isBetween((n % 10), 0, 1)) ||\r\n              (isBetween((n % 10), 5, 9)) ||\r\n              (isBetween((n % 100), 12, 14)))\r\n            return 'many';\r\n          if (n == 1)\r\n            return 'one';\r\n          return 'other';\r\n        },\r\n        '14': function(n) {\r\n          if ((isBetween((n % 100), 3, 4)))\r\n            return 'few';\r\n          if ((n % 100) == 2)\r\n            return 'two';\r\n          if ((n % 100) == 1)\r\n            return 'one';\r\n          return 'other';\r\n        },\r\n        '15': function(n) {\r\n          if (n === 0 || (isBetween((n % 100), 2, 10)))\r\n            return 'few';\r\n          if ((isBetween((n % 100), 11, 19)))\r\n            return 'many';\r\n          if (n == 1)\r\n            return 'one';\r\n          return 'other';\r\n        },\r\n        '16': function(n) {\r\n          if ((n % 10) == 1 && n != 11)\r\n            return 'one';\r\n          return 'other';\r\n        },\r\n        '17': function(n) {\r\n          if (n == 3)\r\n            return 'few';\r\n          if (n === 0)\r\n            return 'zero';\r\n          if (n == 6)\r\n            return 'many';\r\n          if (n == 2)\r\n            return 'two';\r\n          if (n == 1)\r\n            return 'one';\r\n          return 'other';\r\n        },\r\n        '18': function(n) {\r\n          if (n === 0)\r\n            return 'zero';\r\n          if ((isBetween(n, 0, 2)) && n !== 0 && n != 2)\r\n            return 'one';\r\n          return 'other';\r\n        },\r\n        '19': function(n) {\r\n          if ((isBetween(n, 2, 10)))\r\n            return 'few';\r\n          if ((isBetween(n, 0, 1)))\r\n            return 'one';\r\n          return 'other';\r\n        },\r\n        '20': function(n) {\r\n          if ((isBetween((n % 10), 3, 4) || ((n % 10) == 9)) && !(\r\n              isBetween((n % 100), 10, 19) ||\r\n              isBetween((n % 100), 70, 79) ||\r\n              isBetween((n % 100), 90, 99)\r\n              ))\r\n            return 'few';\r\n          if ((n % 1000000) === 0 && n !== 0)\r\n            return 'many';\r\n          if ((n % 10) == 2 && !isIn((n % 100), [12, 72, 92]))\r\n            return 'two';\r\n          if ((n % 10) == 1 && !isIn((n % 100), [11, 71, 91]))\r\n            return 'one';\r\n          return 'other';\r\n        },\r\n        '21': function(n) {\r\n          if (n === 0)\r\n            return 'zero';\r\n          if (n == 1)\r\n            return 'one';\r\n          return 'other';\r\n        },\r\n        '22': function(n) {\r\n          if ((isBetween(n, 0, 1)) || (isBetween(n, 11, 99)))\r\n            return 'one';\r\n          return 'other';\r\n        },\r\n        '23': function(n) {\r\n          if ((isBetween((n % 10), 1, 2)) || (n % 20) === 0)\r\n            return 'one';\r\n          return 'other';\r\n        },\r\n        '24': function(n) {\r\n          if ((isBetween(n, 3, 10) || isBetween(n, 13, 19)))\r\n            return 'few';\r\n          if (isIn(n, [2, 12]))\r\n            return 'two';\r\n          if (isIn(n, [1, 11]))\r\n            return 'one';\r\n          return 'other';\r\n        }\r\n      };\r\n\r\n      // return a function that gives the plural form name for a given integer\r\n      var index = locales2rules[lang.replace(/-.*$/, '')];\r\n      if (!(index in pluralRules)) {\r\n        console.warn('plural form unknown for [' + lang + ']');\r\n        return function() { return 'other'; };\r\n      }\r\n      return pluralRules[index];\r\n    }\r\n\r\n    // pre-defined 'plural' macro\r\n    gMacros.plural = function(str, param, key, prop) {\r\n      var n = parseFloat(param);\r\n      if (isNaN(n))\r\n        return str;\r\n\r\n      // TODO: support other properties (l20n still doesn't...)\r\n      if (prop != gTextProp)\r\n        return str;\r\n\r\n      // initialize _pluralRules\r\n      if (!gMacros._pluralRules) {\r\n        gMacros._pluralRules = getPluralRules(gLanguage);\r\n      }\r\n      var index = '[' + gMacros._pluralRules(n) + ']';\r\n\r\n      // try to find a [zero|one|two] key if it's defined\r\n      if (n === 0 && (key + '[zero]') in gL10nData) {\r\n        str = gL10nData[key + '[zero]'][prop];\r\n      } else if (n == 1 && (key + '[one]') in gL10nData) {\r\n        str = gL10nData[key + '[one]'][prop];\r\n      } else if (n == 2 && (key + '[two]') in gL10nData) {\r\n        str = gL10nData[key + '[two]'][prop];\r\n      } else if ((key + index) in gL10nData) {\r\n        str = gL10nData[key + index][prop];\r\n      } else if ((key + '[other]') in gL10nData) {\r\n        str = gL10nData[key + '[other]'][prop];\r\n      }\r\n\r\n      return str;\r\n    };\r\n\r\n\r\n    /**\r\n     * l10n dictionary functions\r\n     */\r\n\r\n    // fetch an l10n object, warn if not found, apply `args' if possible\r\n    function getL10nData(key, args, fallback) {\r\n      var data = gL10nData[key];\r\n      if (!data) {\r\n        console.warn('#' + key + ' is undefined.');\r\n        if (!fallback) {\r\n          return null;\r\n        }\r\n        data = fallback;\r\n      }\r\n\r\n      /** This is where l10n expressions should be processed.\r\n        * The plan is to support C-style expressions from the l20n project;\r\n        * until then, only two kinds of simple expressions are supported:\r\n        *   {[ index ]} and {{ arguments }}.\r\n        */\r\n      var rv = {};\r\n      for (var prop in data) {\r\n        var str = data[prop];\r\n        str = substIndexes(str, args, key, prop);\r\n        str = substArguments(str, args, key);\r\n        rv[prop] = str;\r\n      }\r\n      return rv;\r\n    }\r\n\r\n    // replace {[macros]} with their values\r\n    function substIndexes(str, args, key, prop) {\r\n      var reIndex = /\\{\\[\\s*([a-zA-Z]+)\\(([a-zA-Z]+)\\)\\s*\\]\\}/;\r\n      var reMatch = reIndex.exec(str);\r\n      if (!reMatch || !reMatch.length)\r\n        return str;\r\n\r\n      // an index/macro has been found\r\n      // Note: at the moment, only one parameter is supported\r\n      var macroName = reMatch[1];\r\n      var paramName = reMatch[2];\r\n      var param;\r\n      if (args && paramName in args) {\r\n        param = args[paramName];\r\n      } else if (paramName in gL10nData) {\r\n        param = gL10nData[paramName];\r\n      }\r\n\r\n      // there's no macro parser yet: it has to be defined in gMacros\r\n      if (macroName in gMacros) {\r\n        var macro = gMacros[macroName];\r\n        str = macro(str, param, key, prop);\r\n      }\r\n      return str;\r\n    }\r\n\r\n    // replace {{arguments}} with their values\r\n    function substArguments(str, args, key) {\r\n      var reArgs = /\\{\\{\\s*(.+?)\\s*\\}\\}/g;\r\n      return str.replace(reArgs, function(matched_text, arg) {\r\n        if (args && arg in args) {\r\n          return args[arg];\r\n        }\r\n        if (arg in gL10nData) {\r\n          return gL10nData[arg];\r\n        }\r\n        console.log('argument {{' + arg + '}} for #' + key + ' is undefined.');\r\n        return matched_text;\r\n      });\r\n    }\r\n\r\n    // translate an HTML element\r\n    function translateElement(element) {\r\n      var l10n = getL10nAttributes(element);\r\n      if (!l10n.id)\r\n        return;\r\n\r\n      // get the related l10n object\r\n      var data = getL10nData(l10n.id, l10n.args);\r\n      if (!data) {\r\n        console.warn('#' + l10n.id + ' is undefined.');\r\n        return;\r\n      }\r\n\r\n      // translate element (TODO: security checks?)\r\n      if (data[gTextProp]) { // XXX\r\n        if (getChildElementCount(element) === 0) {\r\n          element[gTextProp] = data[gTextProp];\r\n        } else {\r\n          // this element has element children: replace the content of the first\r\n          // (non-empty) child textNode and clear other child textNodes\r\n          var children = element.childNodes;\r\n          var found = false;\r\n          for (var i = 0, l = children.length; i < l; i++) {\r\n            if (children[i].nodeType === 3 && /\\S/.test(children[i].nodeValue)) {\r\n              if (found) {\r\n                children[i].nodeValue = '';\r\n              } else {\r\n                children[i].nodeValue = data[gTextProp];\r\n                found = true;\r\n              }\r\n            }\r\n          }\r\n          // if no (non-empty) textNode is found, insert a textNode before the\r\n          // first element child.\r\n          if (!found) {\r\n            var textNode = document.createTextNode(data[gTextProp]);\r\n            element.insertBefore(textNode, element.firstChild);\r\n          }\r\n        }\r\n        delete data[gTextProp];\r\n      }\r\n\r\n      for (var k in data) {\r\n        element[k] = data[k];\r\n      }\r\n    }\r\n\r\n    // webkit browsers don't currently support 'children' on SVG elements...\r\n    function getChildElementCount(element) {\r\n      if (element.children) {\r\n        return element.children.length;\r\n      }\r\n      if (typeof element.childElementCount !== 'undefined') {\r\n        return element.childElementCount;\r\n      }\r\n      var count = 0;\r\n      for (var i = 0; i < element.childNodes.length; i++) {\r\n        count += element.nodeType === 1 ? 1 : 0;\r\n      }\r\n      return count;\r\n    }\r\n\r\n    // translate an HTML subtree\r\n    function translateFragment(element) {\r\n      element = element || document.documentElement;\r\n\r\n      // check all translatable children (= w/ a `data-l10n-id' attribute)\r\n      var children = getTranslatableChildren(element);\r\n      var elementCount = children.length;\r\n      for (var i = 0; i < elementCount; i++) {\r\n        translateElement(children[i]);\r\n      }\r\n\r\n      // translate element itself if necessary\r\n      translateElement(element);\r\n    }\r\n\r\n    return {\r\n      // get a localized string\r\n      get: function(key, args, fallbackString) {\r\n        var index = key.lastIndexOf('.');\r\n        var prop = gTextProp;\r\n        if (index > 0) { // An attribute has been specified\r\n          prop = key.substring(index + 1);\r\n          key = key.substring(0, index);\r\n        }\r\n        var fallback;\r\n        if (fallbackString) {\r\n          fallback = {};\r\n          fallback[prop] = fallbackString;\r\n        }\r\n        var data = getL10nData(key, args, fallback);\r\n        if (data && prop in data) {\r\n          return data[prop];\r\n        }\r\n        return '{{' + key + '}}';\r\n      },\r\n\r\n      // debug\r\n      getData: function() { return gL10nData; },\r\n      getText: function() { return gTextData; },\r\n\r\n      // get|set the document language\r\n      getLanguage: function() { return gLanguage; },\r\n      setLanguage: function(lang, callback) {\r\n        loadLocale(lang, function() {\r\n          if (callback)\r\n            callback();\r\n        });\r\n      },\r\n\r\n      // get the direction (ltr|rtl) of the current language\r\n      getDirection: function() {\r\n        // http://www.w3.org/International/questions/qa-scripts\r\n        // Arabic, Hebrew, Farsi, Pashto, Urdu\r\n        var rtlList = ['ar', 'he', 'fa', 'ps', 'ur'];\r\n        var shortCode = gLanguage.split('-', 1)[0];\r\n        return (rtlList.indexOf(shortCode) >= 0) ? 'rtl' : 'ltr';\r\n      },\r\n\r\n      // translate an element or document fragment\r\n      translate: translateFragment,\r\n\r\n      // this can be used to prevent race conditions\r\n      getReadyState: function() { return gReadyState; },\r\n      ready: function(callback) {\r\n        if (!callback) {\r\n          return;\r\n        } else if (gReadyState == 'complete' || gReadyState == 'interactive') {\r\n          window.setTimeout(function() {\r\n            callback();\r\n          });\r\n        } else if (document.addEventListener) {\r\n          document.addEventListener('localized', function once() {\r\n            document.removeEventListener('localized', once);\r\n            callback();\r\n          });\r\n        }\r\n      }\r\n    };\r\n  }) (window, document);\r\n\r\n});"]}