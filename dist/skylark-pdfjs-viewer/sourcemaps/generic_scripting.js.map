{"version":3,"sources":["generic_scripting.js"],"names":["define","pdfjsLib","loadScript","GenericScripting","[object Object]","sandboxBundleSrc","this","_ready","then","window","pdfjsSandbox","QuickJSSandbox","data","create","event","dispatchEvent","nukeSandbox"],"mappings":";;;;;;;AAAAA,QACE,yBACA,SAASC,GAgBT,MAAMC,WAAEA,GAAeD,EA4BvB,OAASE,uBAzBPC,YAAYC,GACVC,KAAKC,OAASL,EACZG,GAC4B,GAC5BG,KAAK,IACEC,OAAOC,aAAaC,kBAI/BP,oBAAoBQ,UACIN,KAAKC,QACnBM,OAAOD,GAGjBR,6BAA6BU,UACLR,KAAKC,QACnBQ,cAAcD,GAGxBV,8BACwBE,KAAKC,QACnBS","file":"../generic_scripting.js","sourcesContent":["define([\n  \"skylark-pdfjs-display\"\n],function(pdfjsLib){\n  /* Copyright 2020 Mozilla Foundation\n   *\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   *     http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n\n  const { loadScript } = pdfjsLib;\n\n  class GenericScripting {\n    constructor(sandboxBundleSrc) {\n      this._ready = loadScript(\n        sandboxBundleSrc,\n        /* removeScriptElement = */ true\n      ).then(() => {\n        return window.pdfjsSandbox.QuickJSSandbox();\n      });\n    }\n\n    async createSandbox(data) {\n      const sandbox = await this._ready;\n      sandbox.create(data);\n    }\n\n    async dispatchEventInSandbox(event) {\n      const sandbox = await this._ready;\n      sandbox.dispatchEvent(event);\n    }\n\n    async destroySandbox() {\n      const sandbox = await this._ready;\n      sandbox.nukeSandbox();\n    }\n  }\n\n  return { GenericScripting };\n});"]}