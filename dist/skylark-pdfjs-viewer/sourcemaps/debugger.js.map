{"version":3,"sources":["debugger.js"],"names":["define","opMap","steppers","stepperDiv","stepperControls","stepperChooser","breakPoints","buttons","activePanel","FontInspector","fonts","active","fontAttribute","resetSelection","divs","document","querySelectorAll","div","className","selectFont","fontName","show","textLayerClick","e","target","dataset","tagName","toUpperCase","selects","getElementsByTagName","i","length","select","checked","scrollIntoView","id","name","panel","manager","init","pdfjsLib","this","tmp","createElement","addEventListener","textContent","appendChild","cleanup","enabled","value","body","removeEventListener","removeSelection","fontAdded","fontObj","url","moreInfo","obj","list","tr","td1","td2","toString","properties","loadedName","font","download","exec","href","data","URL","createObjectURL","Blob","type","mimeType","logIt","event","preventDefault","console","log","setAttribute","createTextNode","setTimeout","StepperManager","Object","create","self","key","selectStepper","sessionStorage","getItem","JSON","parse","OPS","pageIndex","debug","b","initBreakPoints","stepper","Stepper","push","selectPanel","removeAttribute","options","option","selected","saveBreakPoints","bps","setItem","stringify","c","tag","d","simplifyArgs","args","substring","ii","simpleArgs","Math","min","simpleObj","initialBreakPoints","breakPoint","nextBreakPoint","currentIdx","operatorListIdx","prototype","operatorList","content","table","cellSpacing","headerRow","updateOperatorList","cboxOnClick","x","idx","splice","indexOf","chunk","createDocumentFragment","operatorsToDisplay","fnArray","line","includes","argsArray","breakCell","cbox","onclick","fn","decArgs","glyphs","newArgs","str","j","glyph","fontChar","join","lastCell","colspan","getNextBreakPoint","sort","a","breakIt","callback","dom","listener","keyCode","goTo","allRows","getElementsByClassName","xx","row","style","backgroundColor","Stats","stats","clear","node","hasChildNodes","removeChild","lastChild","[object Object]","pageNumber","stat","statsIndex","getStatIndex","wrapper","title","statsDiv","window","PDFBug","tools","ids","all","tool","indexA","indexB","container","ui","controls","panels","right","panelWidth","panelButton","index"],"mappings":"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","file":"../debugger.js","sourcesContent":["define([],function(){\n  /* Copyright 2012 Mozilla Foundation\n   *\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   *     http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  /* eslint-disable no-var */\n\n\"use strict\";\n\n  var FontInspector = (function FontInspectorClosure() {\n    var fonts;\n    var active = false;\n    var fontAttribute = \"data-font-name\";\n    function removeSelection() {\n      const divs = document.querySelectorAll(`span[${fontAttribute}]`);\n      for (const div of divs) {\n        div.className = \"\";\n      }\n    }\n    function resetSelection() {\n      const divs = document.querySelectorAll(`span[${fontAttribute}]`);\n      for (const div of divs) {\n        div.className = \"debuggerHideText\";\n      }\n    }\n    function selectFont(fontName, show) {\n      const divs = document.querySelectorAll(\n        `span[${fontAttribute}=${fontName}]`\n      );\n      for (const div of divs) {\n        div.className = show ? \"debuggerShowText\" : \"debuggerHideText\";\n      }\n    }\n    function textLayerClick(e) {\n      if (\n        !e.target.dataset.fontName ||\n        e.target.tagName.toUpperCase() !== \"SPAN\"\n      ) {\n        return;\n      }\n      var fontName = e.target.dataset.fontName;\n      var selects = document.getElementsByTagName(\"input\");\n      for (var i = 0; i < selects.length; ++i) {\n        var select = selects[i];\n        if (select.dataset.fontName !== fontName) {\n          continue;\n        }\n        select.checked = !select.checked;\n        selectFont(fontName, select.checked);\n        select.scrollIntoView();\n      }\n    }\n    return {\n      // Properties/functions needed by PDFBug.\n      id: \"FontInspector\",\n      name: \"Font Inspector\",\n      panel: null,\n      manager: null,\n      init: function init(pdfjsLib) {\n        var panel = this.panel;\n        var tmp = document.createElement(\"button\");\n        tmp.addEventListener(\"click\", resetSelection);\n        tmp.textContent = \"Refresh\";\n        panel.appendChild(tmp);\n\n        fonts = document.createElement(\"div\");\n        panel.appendChild(fonts);\n      },\n      cleanup: function cleanup() {\n        fonts.textContent = \"\";\n      },\n      enabled: false,\n      get active() {\n        return active;\n      },\n      set active(value) {\n        active = value;\n        if (active) {\n          document.body.addEventListener(\"click\", textLayerClick, true);\n          resetSelection();\n        } else {\n          document.body.removeEventListener(\"click\", textLayerClick, true);\n          removeSelection();\n        }\n      },\n      // FontInspector specific functions.\n      fontAdded: function fontAdded(fontObj, url) {\n        function properties(obj, list) {\n          var moreInfo = document.createElement(\"table\");\n          for (var i = 0; i < list.length; i++) {\n            var tr = document.createElement(\"tr\");\n            var td1 = document.createElement(\"td\");\n            td1.textContent = list[i];\n            tr.appendChild(td1);\n            var td2 = document.createElement(\"td\");\n            td2.textContent = obj[list[i]].toString();\n            tr.appendChild(td2);\n            moreInfo.appendChild(tr);\n          }\n          return moreInfo;\n        }\n        var moreInfo = properties(fontObj, [\"name\", \"type\"]);\n        const fontName = fontObj.loadedName;\n        var font = document.createElement(\"div\");\n        var name = document.createElement(\"span\");\n        name.textContent = fontName;\n        var download = document.createElement(\"a\");\n        if (url) {\n          url = /url\\(['\"]?([^)\"']+)/.exec(url);\n          download.href = url[1];\n        } else if (fontObj.data) {\n          download.href = URL.createObjectURL(\n            new Blob([fontObj.data], { type: fontObj.mimeType })\n          );\n        }\n        download.textContent = \"Download\";\n        var logIt = document.createElement(\"a\");\n        logIt.href = \"\";\n        logIt.textContent = \"Log\";\n        logIt.addEventListener(\"click\", function (event) {\n          event.preventDefault();\n          console.log(fontObj);\n        });\n        const select = document.createElement(\"input\");\n        select.setAttribute(\"type\", \"checkbox\");\n        select.dataset.fontName = fontName;\n        select.addEventListener(\"click\", function () {\n          selectFont(fontName, select.checked);\n        });\n        font.appendChild(select);\n        font.appendChild(name);\n        font.appendChild(document.createTextNode(\" \"));\n        font.appendChild(download);\n        font.appendChild(document.createTextNode(\" \"));\n        font.appendChild(logIt);\n        font.appendChild(moreInfo);\n        fonts.appendChild(font);\n        // Somewhat of a hack, should probably add a hook for when the text layer\n        // is done rendering.\n        setTimeout(() => {\n          if (this.active) {\n            resetSelection();\n          }\n        }, 2000);\n      },\n    };\n  })();\n\n  var opMap;\n\n  // Manages all the page steppers.\n  var StepperManager = (function StepperManagerClosure() {\n    var steppers = [];\n    var stepperDiv = null;\n    var stepperControls = null;\n    var stepperChooser = null;\n    var breakPoints = Object.create(null);\n    return {\n      // Properties/functions needed by PDFBug.\n      id: \"Stepper\",\n      name: \"Stepper\",\n      panel: null,\n      manager: null,\n      init: function init(pdfjsLib) {\n        var self = this;\n        stepperControls = document.createElement(\"div\");\n        stepperChooser = document.createElement(\"select\");\n        stepperChooser.addEventListener(\"change\", function (event) {\n          self.selectStepper(this.value);\n        });\n        stepperControls.appendChild(stepperChooser);\n        stepperDiv = document.createElement(\"div\");\n        this.panel.appendChild(stepperControls);\n        this.panel.appendChild(stepperDiv);\n        if (sessionStorage.getItem(\"pdfjsBreakPoints\")) {\n          breakPoints = JSON.parse(sessionStorage.getItem(\"pdfjsBreakPoints\"));\n        }\n\n        opMap = Object.create(null);\n        for (var key in pdfjsLib.OPS) {\n          opMap[pdfjsLib.OPS[key]] = key;\n        }\n      },\n      cleanup: function cleanup() {\n        stepperChooser.textContent = \"\";\n        stepperDiv.textContent = \"\";\n        steppers = [];\n      },\n      enabled: false,\n      active: false,\n      // Stepper specific functions.\n      create: function create(pageIndex) {\n        var debug = document.createElement(\"div\");\n        debug.id = \"stepper\" + pageIndex;\n        debug.setAttribute(\"hidden\", true);\n        debug.className = \"stepper\";\n        stepperDiv.appendChild(debug);\n        var b = document.createElement(\"option\");\n        b.textContent = \"Page \" + (pageIndex + 1);\n        b.value = pageIndex;\n        stepperChooser.appendChild(b);\n        var initBreakPoints = breakPoints[pageIndex] || [];\n        var stepper = new Stepper(debug, pageIndex, initBreakPoints);\n        steppers.push(stepper);\n        if (steppers.length === 1) {\n          this.selectStepper(pageIndex, false);\n        }\n        return stepper;\n      },\n      selectStepper: function selectStepper(pageIndex, selectPanel) {\n        var i;\n        pageIndex = pageIndex | 0;\n        if (selectPanel) {\n          this.manager.selectPanel(this);\n        }\n        for (i = 0; i < steppers.length; ++i) {\n          var stepper = steppers[i];\n          if (stepper.pageIndex === pageIndex) {\n            stepper.panel.removeAttribute(\"hidden\");\n          } else {\n            stepper.panel.setAttribute(\"hidden\", true);\n          }\n        }\n        var options = stepperChooser.options;\n        for (i = 0; i < options.length; ++i) {\n          var option = options[i];\n          option.selected = (option.value | 0) === pageIndex;\n        }\n      },\n      saveBreakPoints: function saveBreakPoints(pageIndex, bps) {\n        breakPoints[pageIndex] = bps;\n        sessionStorage.setItem(\"pdfjsBreakPoints\", JSON.stringify(breakPoints));\n      },\n    };\n  })();\n\n  // The stepper for each page's IRQueue.\n  var Stepper = (function StepperClosure() {\n    // Shorter way to create element and optionally set textContent.\n    function c(tag, textContent) {\n      var d = document.createElement(tag);\n      if (textContent) {\n        d.textContent = textContent;\n      }\n      return d;\n    }\n\n    function simplifyArgs(args) {\n      if (typeof args === \"string\") {\n        var MAX_STRING_LENGTH = 75;\n        return args.length <= MAX_STRING_LENGTH\n          ? args\n          : args.substring(0, MAX_STRING_LENGTH) + \"...\";\n      }\n      if (typeof args !== \"object\" || args === null) {\n        return args;\n      }\n      if (\"length\" in args) {\n        // array\n        var simpleArgs = [],\n          i,\n          ii;\n        var MAX_ITEMS = 10;\n        for (i = 0, ii = Math.min(MAX_ITEMS, args.length); i < ii; i++) {\n          simpleArgs.push(simplifyArgs(args[i]));\n        }\n        if (i < args.length) {\n          simpleArgs.push(\"...\");\n        }\n        return simpleArgs;\n      }\n      var simpleObj = {};\n      for (var key in args) {\n        simpleObj[key] = simplifyArgs(args[key]);\n      }\n      return simpleObj;\n    }\n\n    // eslint-disable-next-line no-shadow\n    function Stepper(panel, pageIndex, initialBreakPoints) {\n      this.panel = panel;\n      this.breakPoint = 0;\n      this.nextBreakPoint = null;\n      this.pageIndex = pageIndex;\n      this.breakPoints = initialBreakPoints;\n      this.currentIdx = -1;\n      this.operatorListIdx = 0;\n    }\n    Stepper.prototype = {\n      init: function init(operatorList) {\n        var panel = this.panel;\n        var content = c(\"div\", \"c=continue, s=step\");\n        var table = c(\"table\");\n        content.appendChild(table);\n        table.cellSpacing = 0;\n        var headerRow = c(\"tr\");\n        table.appendChild(headerRow);\n        headerRow.appendChild(c(\"th\", \"Break\"));\n        headerRow.appendChild(c(\"th\", \"Idx\"));\n        headerRow.appendChild(c(\"th\", \"fn\"));\n        headerRow.appendChild(c(\"th\", \"args\"));\n        panel.appendChild(content);\n        this.table = table;\n        this.updateOperatorList(operatorList);\n      },\n      updateOperatorList: function updateOperatorList(operatorList) {\n        var self = this;\n\n        function cboxOnClick() {\n          var x = +this.dataset.idx;\n          if (this.checked) {\n            self.breakPoints.push(x);\n          } else {\n            self.breakPoints.splice(self.breakPoints.indexOf(x), 1);\n          }\n          StepperManager.saveBreakPoints(self.pageIndex, self.breakPoints);\n        }\n\n        var MAX_OPERATORS_COUNT = 15000;\n        if (this.operatorListIdx > MAX_OPERATORS_COUNT) {\n          return;\n        }\n\n        var chunk = document.createDocumentFragment();\n        var operatorsToDisplay = Math.min(\n          MAX_OPERATORS_COUNT,\n          operatorList.fnArray.length\n        );\n        for (var i = this.operatorListIdx; i < operatorsToDisplay; i++) {\n          var line = c(\"tr\");\n          line.className = \"line\";\n          line.dataset.idx = i;\n          chunk.appendChild(line);\n          var checked = this.breakPoints.includes(i);\n          var args = operatorList.argsArray[i] || [];\n\n          var breakCell = c(\"td\");\n          var cbox = c(\"input\");\n          cbox.type = \"checkbox\";\n          cbox.className = \"points\";\n          cbox.checked = checked;\n          cbox.dataset.idx = i;\n          cbox.onclick = cboxOnClick;\n\n          breakCell.appendChild(cbox);\n          line.appendChild(breakCell);\n          line.appendChild(c(\"td\", i.toString()));\n          var fn = opMap[operatorList.fnArray[i]];\n          var decArgs = args;\n          if (fn === \"showText\") {\n            var glyphs = args[0];\n            var newArgs = [];\n            var str = [];\n            for (var j = 0; j < glyphs.length; j++) {\n              var glyph = glyphs[j];\n              if (typeof glyph === \"object\" && glyph !== null) {\n                str.push(glyph.fontChar);\n              } else {\n                if (str.length > 0) {\n                  newArgs.push(str.join(\"\"));\n                  str = [];\n                }\n                newArgs.push(glyph); // null or number\n              }\n            }\n            if (str.length > 0) {\n              newArgs.push(str.join(\"\"));\n            }\n            decArgs = [newArgs];\n          }\n          line.appendChild(c(\"td\", fn));\n          line.appendChild(c(\"td\", JSON.stringify(simplifyArgs(decArgs))));\n        }\n        if (operatorsToDisplay < operatorList.fnArray.length) {\n          var lastCell = c(\"td\", \"...\");\n          lastCell.colspan = 4;\n          chunk.appendChild(lastCell);\n        }\n        this.operatorListIdx = operatorList.fnArray.length;\n        this.table.appendChild(chunk);\n      },\n      getNextBreakPoint: function getNextBreakPoint() {\n        this.breakPoints.sort(function (a, b) {\n          return a - b;\n        });\n        for (var i = 0; i < this.breakPoints.length; i++) {\n          if (this.breakPoints[i] > this.currentIdx) {\n            return this.breakPoints[i];\n          }\n        }\n        return null;\n      },\n      breakIt: function breakIt(idx, callback) {\n        StepperManager.selectStepper(this.pageIndex, true);\n        var self = this;\n        var dom = document;\n        self.currentIdx = idx;\n        var listener = function (e) {\n          switch (e.keyCode) {\n            case 83: // step\n              dom.removeEventListener(\"keydown\", listener);\n              self.nextBreakPoint = self.currentIdx + 1;\n              self.goTo(-1);\n              callback();\n              break;\n            case 67: // continue\n              dom.removeEventListener(\"keydown\", listener);\n              var breakPoint = self.getNextBreakPoint();\n              self.nextBreakPoint = breakPoint;\n              self.goTo(-1);\n              callback();\n              break;\n          }\n        };\n        dom.addEventListener(\"keydown\", listener);\n        self.goTo(idx);\n      },\n      goTo: function goTo(idx) {\n        var allRows = this.panel.getElementsByClassName(\"line\");\n        for (var x = 0, xx = allRows.length; x < xx; ++x) {\n          var row = allRows[x];\n          if ((row.dataset.idx | 0) === idx) {\n            row.style.backgroundColor = \"rgb(251,250,207)\";\n            row.scrollIntoView();\n          } else {\n            row.style.backgroundColor = null;\n          }\n        }\n      },\n    };\n    return Stepper;\n  })();\n\n  var Stats = (function Stats() {\n    var stats = [];\n    function clear(node) {\n      while (node.hasChildNodes()) {\n        node.removeChild(node.lastChild);\n      }\n    }\n    function getStatIndex(pageNumber) {\n      for (var i = 0, ii = stats.length; i < ii; ++i) {\n        if (stats[i].pageNumber === pageNumber) {\n          return i;\n        }\n      }\n      return false;\n    }\n    return {\n      // Properties/functions needed by PDFBug.\n      id: \"Stats\",\n      name: \"Stats\",\n      panel: null,\n      manager: null,\n      init(pdfjsLib) {},\n      enabled: false,\n      active: false,\n      // Stats specific functions.\n      add(pageNumber, stat) {\n        if (!stat) {\n          return;\n        }\n        var statsIndex = getStatIndex(pageNumber);\n        if (statsIndex !== false) {\n          const b = stats[statsIndex];\n          this.panel.removeChild(b.div);\n          stats.splice(statsIndex, 1);\n        }\n        var wrapper = document.createElement(\"div\");\n        wrapper.className = \"stats\";\n        var title = document.createElement(\"div\");\n        title.className = \"title\";\n        title.textContent = \"Page: \" + pageNumber;\n        var statsDiv = document.createElement(\"div\");\n        statsDiv.textContent = stat.toString();\n        wrapper.appendChild(title);\n        wrapper.appendChild(statsDiv);\n        stats.push({ pageNumber, div: wrapper });\n        stats.sort(function (a, b) {\n          return a.pageNumber - b.pageNumber;\n        });\n        clear(this.panel);\n        for (var i = 0, ii = stats.length; i < ii; ++i) {\n          this.panel.appendChild(stats[i].div);\n        }\n      },\n      cleanup() {\n        stats = [];\n        clear(this.panel);\n      },\n    };\n  })();\n\n  // Manages all the debugging tools.\n  window.PDFBug = (function PDFBugClosure() {\n    var panelWidth = 300;\n    var buttons = [];\n    var activePanel = null;\n\n    return {\n      tools: [FontInspector, StepperManager, Stats],\n      enable(ids) {\n        var all = false,\n          tools = this.tools;\n        if (ids.length === 1 && ids[0] === \"all\") {\n          all = true;\n        }\n        for (var i = 0; i < tools.length; ++i) {\n          var tool = tools[i];\n          if (all || ids.includes(tool.id)) {\n            tool.enabled = true;\n          }\n        }\n        if (!all) {\n          // Sort the tools by the order they are enabled.\n          tools.sort(function (a, b) {\n            var indexA = ids.indexOf(a.id);\n            indexA = indexA < 0 ? tools.length : indexA;\n            var indexB = ids.indexOf(b.id);\n            indexB = indexB < 0 ? tools.length : indexB;\n            return indexA - indexB;\n          });\n        }\n      },\n      init(pdfjsLib, container) {\n        /*\n         * Basic Layout:\n         * PDFBug\n         *  Controls\n         *  Panels\n         *    Panel\n         *    Panel\n         *    ...\n         */\n        var ui = document.createElement(\"div\");\n        ui.id = \"PDFBug\";\n\n        var controls = document.createElement(\"div\");\n        controls.setAttribute(\"class\", \"controls\");\n        ui.appendChild(controls);\n\n        var panels = document.createElement(\"div\");\n        panels.setAttribute(\"class\", \"panels\");\n        ui.appendChild(panels);\n\n        container.appendChild(ui);\n        container.style.right = panelWidth + \"px\";\n\n        // Initialize all the debugging tools.\n        var tools = this.tools;\n        var self = this;\n        for (var i = 0; i < tools.length; ++i) {\n          var tool = tools[i];\n          var panel = document.createElement(\"div\");\n          var panelButton = document.createElement(\"button\");\n          panelButton.textContent = tool.name;\n          panelButton.addEventListener(\n            \"click\",\n            (function (selected) {\n              return function (event) {\n                event.preventDefault();\n                self.selectPanel(selected);\n              };\n            })(i)\n          );\n          controls.appendChild(panelButton);\n          panels.appendChild(panel);\n          tool.panel = panel;\n          tool.manager = this;\n          if (tool.enabled) {\n            tool.init(pdfjsLib);\n          } else {\n            panel.textContent =\n              tool.name +\n              \" is disabled. To enable add \" +\n              ' \"' +\n              tool.id +\n              '\" to the pdfBug parameter ' +\n              \"and refresh (separate multiple by commas).\";\n          }\n          buttons.push(panelButton);\n        }\n        this.selectPanel(0);\n      },\n      cleanup() {\n        for (var i = 0, ii = this.tools.length; i < ii; i++) {\n          if (this.tools[i].enabled) {\n            this.tools[i].cleanup();\n          }\n        }\n      },\n      selectPanel(index) {\n        if (typeof index !== \"number\") {\n          index = this.tools.indexOf(index);\n        }\n        if (index === activePanel) {\n          return;\n        }\n        activePanel = index;\n        var tools = this.tools;\n        for (var j = 0; j < tools.length; ++j) {\n          if (j === index) {\n            buttons[j].setAttribute(\"class\", \"active\");\n            tools[j].active = true;\n            tools[j].panel.removeAttribute(\"hidden\");\n          } else {\n            buttons[j].setAttribute(\"class\", \"\");\n            tools[j].active = false;\n            tools[j].panel.setAttribute(\"hidden\", \"true\");\n          }\n        }\n      },\n    };\n  })();\n\n  return {\n    PDFBug : window.PDFBug\n  };\n});"]}