/**
 * skylark-pdfjs-viewer - A version of video.js that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["skylark-pdfjs-display","./pdfjs_dev","./ui_utils","./app_options","./pdf_cursor_tools","./pdf_rendering_queue","./overlay_manager","./password_prompt","./pdf_attachment_viewer","./pdf_document_properties","./pdf_find_bar","./pdf_find_controller","./pdf_history","./pdf_layer_viewer","./pdf_link_service","./pdf_outline_viewer","./pdf_presentation_mode","./pdf_sidebar","./pdf_sidebar_resizer","./pdf_thumbnail_viewer","./pdf_viewer","./secondary_toolbar","./toolbar","./viewer_compatibility","./view_history"],function(e,t,n,i,r,o,s,a,l,d,c,u,p,h,f,g,m,w,b,v,P,_,y,S,k){const{animationStarted:E,AutoPrintRegExp:C,DEFAULT_SCALE_VALUE:T,EventBus:V,getActiveOrFocusedElement:L,getPDFFileNameFromURL:F,isValidRotation:D,isValidScrollMode:I,isValidSpreadMode:M,MAX_SCALE:N,MIN_SCALE:B,noContextMenuHandler:R,normalizeWheelEventDirection:A,parseQueryString:O,ProgressBar:x,RendererType:U,ScrollMode:z,SidebarView:W,SpreadMode:H,TextLayerMode:K}=n,{AppOptions:G,OptionKind:j}=i,{build:q,createPromiseCapability:$,getDocument:Z,getFilenameFromUrl:Q,GlobalWorkerOptions:X,InvalidPDFException:J,LinkTarget:Y,loadScript:ee,MissingPDFException:te,OPS:ne,PDFWorker:ie,PermissionFlag:re,shadow:oe,UnexpectedResponseException:se,UNSUPPORTED_FEATURES:ae,version:le}=e,{CursorTool:de,PDFCursorTools:ce}=r,{PDFRenderingQueue:ue,RenderingStates:pe}=o,{OverlayManager:he}=s,{PasswordPrompt:fe}=a,{PDFAttachmentViewer:ge}=l,{PDFDocumentProperties:me}=d,{PDFFindBar:we}=c,{PDFFindController:be}=u,{PDFHistory:ve}=p,{PDFLayerViewer:Pe}=h,{PDFLinkService:_e}=f,{PDFOutlineViewer:ye}=g,{PDFPresentationMode:Se}=m,{PDFSidebar:ke}=w,{PDFSidebarResizer:Ee}=b,{PDFThumbnailViewer:Ce}=v,{PDFViewer:Te}=P,{SecondaryToolbar:Ve}=_,{Toolbar:Le}=y,{viewerCompatibilityParams:Fe}=S,{ViewHistory:De}=k,Ie=1e3,Me="enablePermissions",Ne=-1,Be=1,Re={AUTOMATIC:0,LIGHT:1,DARK:2},Ae=["1.0","1.1","1.2","1.3","1.4","1.5","1.6","1.7","1.8","1.9","2.0","2.1","2.2","2.3"],Oe=["acrobat distiller","acrobat pdfwriter","adobe livecycle","adobe pdf library","adobe photoshop","ghostscript","tcpdf","cairo","dvipdfm","dvips","pdftex","pdfkit","itext","prince","quarkxpress","mac os x","microsoft","openoffice","oracle","luradocument","pdf-xchange","antenna house","aspose.cells","fpdf"];class xe{constructor(){throw new Error("Cannot initialize DefaultExternalServices.")}static updateFindControlState(e){}static updateFindMatchesCount(e){}static initPassiveLoading(e){}static async fallback(e){}static reportTelemetry(e){}static createDownloadManager(e){throw new Error("Not implemented: createDownloadManager")}static createPreferences(){throw new Error("Not implemented: createPreferences")}static createL10n(e){throw new Error("Not implemented: createL10n")}static createScripting(e){throw new Error("Not implemented: createScripting")}static get supportsIntegratedFind(){return oe(this,"supportsIntegratedFind",!1)}static get supportsDocumentFonts(){return oe(this,"supportsDocumentFonts",!0)}static get supportedMouseWheelZoomModifierKeys(){return oe(this,"supportedMouseWheelZoomModifierKeys",{ctrlKey:!0,metaKey:!0})}static get isInAutomation(){return oe(this,"isInAutomation",!1)}}const Ue={initialBookmark:document.location.hash.substring(1),_initializedCapability:$(),fellback:!1,appConfig:null,pdfDocument:null,pdfLoadingTask:null,printService:null,pdfViewer:null,pdfThumbnailViewer:null,pdfRenderingQueue:null,pdfPresentationMode:null,pdfDocumentProperties:null,pdfLinkService:null,pdfHistory:null,pdfSidebar:null,pdfSidebarResizer:null,pdfOutlineViewer:null,pdfAttachmentViewer:null,pdfLayerViewer:null,pdfCursorTools:null,store:null,downloadManager:null,overlayManager:null,preferences:null,toolbar:null,secondaryToolbar:null,eventBus:null,l10n:null,isInitialViewSet:!1,downloadComplete:!1,isViewerEmbedded:window.parent!==window,url:"",baseUrl:"",externalServices:xe,_boundEvents:Object.create(null),documentInfo:null,metadata:null,_contentDispositionFilename:null,_contentLength:null,triggerDelayedFallback:null,_saveInProgress:!1,_wheelUnusedTicks:0,_idleCallbacks:new Set,_scriptingInstance:null,_mouseState:Object.create(null),async initialize(e){this.preferences=this.externalServices.createPreferences(),this.appConfig=e,await this._readPreferences(),await this._parseHashParameters(),this._forceCssTheme(),await this._initializeL10n(),this.isViewerEmbedded&&G.get("externalLinkTarget")===Y.NONE&&G.set("externalLinkTarget",Y.TOP),await this._initializeViewerComponents(),this.bindEvents(),this.bindWindowEvents();const t=e.appContainer||document.documentElement;this.l10n.translate(t).then(()=>{this.eventBus.dispatch("localized",{source:this})}),this._initializedCapability.resolve()},async _readPreferences(){if(void 0!==t&&!t.test("!PRODUCTION || GENERIC")||!G.get("disablePreferences"))try{G.setAll(await this.preferences.getAll())}catch(e){console.error(`_readPreferences: "${e&&e.message}".`)}},async _parseHashParameters(){if(!G.get("pdfBugEnabled"))return;const e=document.location.hash.substring(1);if(!e)return;const n=O(e),i=[];if("disableworker"in n&&"true"===n.disableworker&&i.push(async function(){X.workerSrc||(X.workerSrc=G.get("workerSrc"));if(void 0===t||!t.test("PRODUCTION"))return void(window.pdfjsWorker=await import("pdfjs/core/worker.js"));return ee(ie.getWorkerSrc())}()),"disablerange"in n&&G.set("disableRange","true"===n.disablerange),"disablestream"in n&&G.set("disableStream","true"===n.disablestream),"disableautofetch"in n&&G.set("disableAutoFetch","true"===n.disableautofetch),"disablefontface"in n&&G.set("disableFontFace","true"===n.disablefontface),"disablehistory"in n&&G.set("disableHistory","true"===n.disablehistory),"webgl"in n&&G.set("enableWebGL","true"===n.webgl),"verbosity"in n&&G.set("verbosity",0|n.verbosity),"textlayer"in n)switch(n.textlayer){case"off":G.set("textLayerMode",K.DISABLE);break;case"visible":case"shadow":case"hover":this.appConfig.viewerContainer.classList.add("textLayer-"+n.textlayer)}if("pdfbug"in n){G.set("pdfBug",!0),G.set("fontExtraProperties",!0);const e=n.pdfbug.split(",");i.push(function(e){const t=Ue.appConfig;return ee(t.debuggerScriptPath).then(function(){PDFBug.enable(e),PDFBug.init({OPS:ne},t.mainContainer)})}(e))}return(void 0===t||t.test("!PRODUCTION || GENERIC"))&&"locale"in n&&G.set("locale",n.locale),0!==i.length?Promise.all(i).catch(e=>{console.error(`_parseHashParameters: "${e.message}".`)}):void 0},async _initializeL10n(){this.l10n=this.externalServices.createL10n(void 0===t||t.test("!PRODUCTION || GENERIC")?{locale:G.get("locale")}:null);const e=await this.l10n.getDirection();document.getElementsByTagName("html")[0].dir=e},_forceCssTheme(){const e=G.get("viewerCssTheme");if(e!==Re.AUTOMATIC&&Object.values(Re).includes(e))try{const t=document.styleSheets[0],n=t&&t.cssRules||[];for(let i=0,r=n.length;i<r;i++){const r=n[i];if(r instanceof CSSMediaRule&&r.media&&"(prefers-color-scheme: dark)"===r.media[0]){if(e===Re.LIGHT)return void t.deleteRule(i);const n=/^@media \(prefers-color-scheme: dark\) {\n\s*([\w\s-.,:;/\\{}()]+)\n}$/.exec(r.cssText);return void(n&&n[1]&&(t.deleteRule(i),t.insertRule(n[1],i)))}}}catch(e){console.error(`_forceCssTheme: "${e&&e.message}".`)}},async _initializeViewerComponents(){const e=this.appConfig,t=e.eventBus||new V({isInAutomation:this.externalServices.isInAutomation});this.eventBus=t,this.overlayManager=new he;const n=new ue;n.onIdle=this.cleanup.bind(this),this.pdfRenderingQueue=n;const i=new _e({eventBus:t,externalLinkTarget:G.get("externalLinkTarget"),externalLinkRel:G.get("externalLinkRel"),ignoreDestinationZoom:G.get("ignoreDestinationZoom")});this.pdfLinkService=i;const r=this.externalServices.createDownloadManager();this.downloadManager=r;const o=new be({linkService:i,eventBus:t});this.findController=o;const s=e.mainContainer,a=e.viewerContainer;this.pdfViewer=new Te({container:s,viewer:a,eventBus:t,renderingQueue:n,linkService:i,downloadManager:r,findController:o,renderer:G.get("renderer"),enableWebGL:G.get("enableWebGL"),l10n:this.l10n,textLayerMode:G.get("textLayerMode"),imageResourcesPath:G.get("imageResourcesPath"),renderInteractiveForms:G.get("renderInteractiveForms"),enablePrintAutoRotate:G.get("enablePrintAutoRotate"),useOnlyCssZoom:G.get("useOnlyCssZoom"),maxCanvasPixels:G.get("maxCanvasPixels"),enableScripting:G.get("enableScripting"),mouseState:this._mouseState}),n.setViewer(this.pdfViewer),i.setViewer(this.pdfViewer),this.pdfThumbnailViewer=new Ce({container:e.sidebar.thumbnailView,eventBus:t,renderingQueue:n,linkService:i,l10n:this.l10n}),n.setThumbnailViewer(this.pdfThumbnailViewer),this.pdfHistory=new ve({linkService:i,eventBus:t}),i.setHistory(this.pdfHistory),this.supportsIntegratedFind||(this.findBar=new we(e.findBar,t,this.l10n)),this.pdfDocumentProperties=new me(e.documentProperties,this.overlayManager,t,this.l10n),this.pdfCursorTools=new ce({container:s,eventBus:t,cursorToolOnLoad:G.get("cursorToolOnLoad")}),this.toolbar=new Le(e.toolbar,t,this.l10n),this.secondaryToolbar=new Ve(e.secondaryToolbar,s,t),this.supportsFullscreen&&(this.pdfPresentationMode=new Se({container:s,pdfViewer:this.pdfViewer,eventBus:t,contextMenuItems:e.fullscreen})),this.passwordPrompt=new fe(e.passwordOverlay,this.overlayManager,this.l10n),this.pdfOutlineViewer=new ye({container:e.sidebar.outlineView,eventBus:t,linkService:i}),this.pdfAttachmentViewer=new ge({container:e.sidebar.attachmentsView,eventBus:t,downloadManager:r}),this.pdfLayerViewer=new Pe({container:e.sidebar.layersView,eventBus:t,l10n:this.l10n}),this.pdfSidebar=new ke({elements:e.sidebar,pdfViewer:this.pdfViewer,pdfThumbnailViewer:this.pdfThumbnailViewer,eventBus:t,l10n:this.l10n}),this.pdfSidebar.onToggled=this.forceRendering.bind(this),this.pdfSidebarResizer=new Ee(e.sidebarResizer,t,this.l10n)},run(e){this.initialize(e).then(je)},get initialized(){return this._initializedCapability.settled},get initializedPromise(){return this._initializedCapability.promise},zoomIn(e){if(this.pdfViewer.isInPresentationMode)return;let t=this.pdfViewer.currentScale;do{t=(1.1*t).toFixed(2),t=Math.ceil(10*t)/10,t=Math.min(N,t)}while(--e>0&&t<N);this.pdfViewer.currentScaleValue=t},zoomOut(e){if(this.pdfViewer.isInPresentationMode)return;let t=this.pdfViewer.currentScale;do{t=(t/1.1).toFixed(2),t=Math.floor(10*t)/10,t=Math.max(B,t)}while(--e>0&&t>B);this.pdfViewer.currentScaleValue=t},zoomReset(){this.pdfViewer.isInPresentationMode||(this.pdfViewer.currentScaleValue=T)},get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0},get page(){return this.pdfViewer.currentPageNumber},set page(e){this.pdfViewer.currentPageNumber=e},get supportsPrinting(){return xt.instance.supportsPrinting},get supportsFullscreen(){let e;if(void 0!==t&&t.test("MOZCENTRAL"))e=!0===document.fullscreenEnabled||!0===document.mozFullScreenEnabled;else{const t=document.documentElement;e=!!(t.requestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullScreen),!1!==document.fullscreenEnabled&&!1!==document.mozFullScreenEnabled&&!1!==document.webkitFullscreenEnabled||(e=!1)}return oe(this,"supportsFullscreen",e)},get supportsIntegratedFind(){return this.externalServices.supportsIntegratedFind},get supportsDocumentFonts(){return this.externalServices.supportsDocumentFonts},get loadingBar(){const e=new x("#loadingBar");return oe(this,"loadingBar",e)},get supportedMouseWheelZoomModifierKeys(){return this.externalServices.supportedMouseWheelZoomModifierKeys},initPassiveLoading(){if(void 0===t||!t.test("MOZCENTRAL || CHROME"))throw new Error("Not implemented: initPassiveLoading");this.externalServices.initPassiveLoading({onOpenWithTransport(e,t,n){Ue.open(e,{length:t,range:n})},onOpenWithData(e){Ue.open(e)},onOpenWithURL(e,t,n){let i=e,r=null;void 0!==t&&(r={length:t}),void 0!==n&&(i={url:e,originalUrl:n}),Ue.open(i,r)},onError(e){Ue.l10n.get("loading_error",null,"An error occurred while loading the PDF.").then(t=>{Ue.error(t,e)})},onProgress(e,t){Ue.progress(e/t)}})},setTitleUsingUrl(e=""){this.url=e,this.baseUrl=e.split("#")[0];let t=F(e,"");if(!t)try{t=decodeURIComponent(Q(e))||e}catch(n){t=e}this.setTitle(t)},setTitle(e){this.isViewerEmbedded||(document.title=e)},get _docFilename(){return this._contentDispositionFilename||F(this.url)},_cancelIdleCallbacks(){if(this._idleCallbacks.size){for(const e of this._idleCallbacks)window.cancelIdleCallback(e);this._idleCallbacks.clear()}},async _destroyScriptingInstance(){if(!this._scriptingInstance)return;const{scripting:e,internalEvents:t,domEvents:n}=this._scriptingInstance;try{await e.destroySandbox()}catch(e){}for(const[e,n]of t)this.eventBus._off(e,n);t.clear();for(const[e,t]of n)window.removeEventListener(e,t);n.clear(),delete this._mouseState.isDown,this._scriptingInstance=null},async close(){if(this.appConfig.errorWrapper.container.setAttribute("hidden","true"),!this.pdfLoadingTask)return;const e=[];e.push(this.pdfLoadingTask.destroy()),this.pdfLoadingTask=null,this.pdfDocument&&(this.pdfDocument=null,this.pdfThumbnailViewer.setDocument(null),this.pdfViewer.setDocument(null),this.pdfLinkService.setDocument(null),this.pdfDocumentProperties.setDocument(null)),function(){const{appConfig:e}=Ue;if(!e)return;e.viewerContainer.classList.remove(Me)}(),this.store=null,this.isInitialViewSet=!1,this.downloadComplete=!1,this.url="",this.baseUrl="",this.documentInfo=null,this.metadata=null,this._contentDispositionFilename=null,this._contentLength=null,this.triggerDelayedFallback=null,this._saveInProgress=!1,this._cancelIdleCallbacks(),e.push(this._destroyScriptingInstance()),this.pdfSidebar.reset(),this.pdfOutlineViewer.reset(),this.pdfAttachmentViewer.reset(),this.pdfLayerViewer.reset(),this.pdfHistory&&this.pdfHistory.reset(),this.findBar&&this.findBar.reset(),this.toolbar.reset(),this.secondaryToolbar.reset(),"undefined"!=typeof PDFBug&&PDFBug.cleanup(),await Promise.all(e)},async open(e,n){this.pdfLoadingTask&&await this.close();const i=G.getAll(j.WORKER);for(const e in i)X[e]=i[e];const r=Object.create(null);"string"==typeof e?(this.setTitleUsingUrl(e),r.url=e):e&&"byteLength"in e?r.data=e:e.url&&e.originalUrl&&(this.setTitleUsingUrl(e.originalUrl),r.url=e.url);const o=G.getAll(j.API);for(const e in o){let n=o[e];"docBaseUrl"!==e||n||(void 0!==t&&t.test("PRODUCTION")?t.test("MOZCENTRAL || CHROME")&&(n=this.baseUrl):n=document.URL.split("#")[0]),r[e]=n}if(n)for(const e in n)r[e]=n[e];const s=Z(r);return this.pdfLoadingTask=s,s.onPassword=((e,t)=>{this.pdfLinkService.externalLinkEnabled=!1,this.passwordPrompt.setUpdateCallback(e,t),this.passwordPrompt.open()}),s.onProgress=(({loaded:e,total:t})=>{this.progress(e/t)}),s.onUnsupportedFeature=this.fallback.bind(this),s.promise.then(e=>{this.load(e)},e=>{if(s!==this.pdfLoadingTask)return;const t=e&&e.message;let n;return(n=e instanceof J?this.l10n.get("invalid_file_error",null,"Invalid or corrupted PDF file."):e instanceof te?this.l10n.get("missing_file_error",null,"Missing PDF file."):e instanceof se?this.l10n.get("unexpected_response_error",null,"Unexpected server response."):this.l10n.get("loading_error",null,"An error occurred while loading the PDF.")).then(n=>{throw this.error(n,{message:t}),e})})},download({sourceEventType:e="download"}={}){function t(){n.downloadUrl(i,r)}const n=this.downloadManager,i=this.baseUrl,r=this._docFilename;this.pdfDocument&&this.downloadComplete?this.pdfDocument.getData().then(function(t){const o=new Blob([t],{type:"application/pdf"});n.download(o,i,r,e)}).catch(t):t()},async save({sourceEventType:e="download"}={}){if(this._saveInProgress)return;const t=this.downloadManager,n=this.baseUrl,i=this._docFilename;this.pdfDocument&&this.downloadComplete?(this._saveInProgress=!0,await this._scriptingInstance&&this._scriptingInstance.scripting.dispatchEventInSandbox({id:"doc",name:"WillSave"}),this.pdfDocument.saveDocument(this.pdfDocument.annotationStorage).then(r=>{const o=new Blob([r],{type:"application/pdf"});t.download(o,n,i,e)}).catch(()=>{this.download({sourceEventType:e})}).finally(async()=>{await this._scriptingInstance&&this._scriptingInstance.scripting.dispatchEventInSandbox({id:"doc",name:"DidSave"}),this._saveInProgress=!1})):this.download({sourceEventType:e})},downloadOrSave(e){this.pdfDocument&&this.pdfDocument.annotationStorage.size>0?this.save(e):this.download(e)},_delayedFallback(e){this.externalServices.reportTelemetry({type:"unsupportedFeature",featureId:e}),this.triggerDelayedFallback||(this.triggerDelayedFallback=(()=>{this.fallback(e),this.triggerDelayedFallback=null}))},fallback(e){this.externalServices.reportTelemetry({type:"unsupportedFeature",featureId:e}),this.fellback||(this.fellback=!0,this.externalServices.fallback({featureId:e,url:this.baseUrl}).then(e=>{e&&this.download({sourceEventType:"download"})}))},error(e,n){const i=[this.l10n.get("error_version_info",{version:le||"?",build:q||"?"},"PDF.js v{{version}} (build: {{build}})")];if(n&&(i.push(this.l10n.get("error_message",{message:n.message},"Message: {{message}}")),n.stack?i.push(this.l10n.get("error_stack",{stack:n.stack},"Stack: {{stack}}")):(n.filename&&i.push(this.l10n.get("error_file",{file:n.filename},"File: {{file}}")),n.lineNumber&&i.push(this.l10n.get("error_line",{line:n.lineNumber},"Line: {{line}}")))),void 0!==t&&t.test("MOZCENTRAL"))Promise.all(i).then(t=>{console.error(e+"\n"+t.join("\n"))}),this.fallback();else{const t=this.appConfig.errorWrapper,n=t.container;n.removeAttribute("hidden"),t.errorMessage.textContent=e;const r=t.closeButton;r.onclick=function(){n.setAttribute("hidden","true")};const o=t.errorMoreInfo,s=t.moreInfoButton,a=t.lessInfoButton;s.onclick=function(){o.removeAttribute("hidden"),s.setAttribute("hidden","true"),a.removeAttribute("hidden"),o.style.height=o.scrollHeight+"px"},a.onclick=function(){o.setAttribute("hidden","true"),s.removeAttribute("hidden"),a.setAttribute("hidden","true")},s.oncontextmenu=R,a.oncontextmenu=R,r.oncontextmenu=R,s.removeAttribute("hidden"),a.setAttribute("hidden","true"),Promise.all(i).then(e=>{o.value=e.join("\n")})}},progress(e){if(this.downloadComplete)return;const t=Math.round(100*e);if(t>this.loadingBar.percent||isNaN(t)){this.loadingBar.percent=t,(this.pdfDocument?this.pdfDocument.loadingParams.disableAutoFetch:G.get("disableAutoFetch"))&&t&&(this.disableAutoFetchLoadingBarTimeout&&(clearTimeout(this.disableAutoFetchLoadingBarTimeout),this.disableAutoFetchLoadingBarTimeout=null),this.loadingBar.show(),this.disableAutoFetchLoadingBarTimeout=setTimeout(()=>{this.loadingBar.hide(),this.disableAutoFetchLoadingBarTimeout=null},5e3))}},load(e){this.pdfDocument=e,e.getDownloadInfo().then(({length:e})=>{this._contentLength=e,this.downloadComplete=!0,this.loadingBar.hide(),a.then(()=>{this.eventBus.dispatch("documentloaded",{source:this})})});const n=e.getPageLayout().catch(function(){}),i=e.getPageMode().catch(function(){}),r=e.getOpenAction().catch(function(){});let o;this.toolbar.setPagesCount(e.numPages,!1),this.secondaryToolbar.setPagesCount(e.numPages),void 0===t||t.test("GENERIC")?o=null:t.test("MOZCENTRAL")?o=this.baseUrl:t.test("CHROME")&&(o=location.href.split("#")[0]),this.pdfLinkService.setDocument(e,o),this.pdfDocumentProperties.setDocument(e,this.url);const s=this.pdfViewer;s.setDocument(e);const{firstPagePromise:a,onePageRendered:l,pagesPromise:d}=s;this.pdfThumbnailViewer.setDocument(e);const c=(this.store=new De(e.fingerprint)).getMultiple({page:null,zoom:T,scrollLeft:"0",scrollTop:"0",rotation:null,sidebarView:W.UNKNOWN,scrollMode:z.UNKNOWN,spreadMode:H.UNKNOWN}).catch(()=>Object.create(null));a.then(t=>{this.loadingBar.setWidth(this.appConfig.viewerContainer),this._initializeAnnotationStorageCallbacks(e),Promise.all([E,c,n,i,r]).then(async([t,n,i,r,o])=>{const a=G.get("viewOnLoad");this._initializePdfHistory({fingerprint:e.fingerprint,viewOnLoad:a,initialDest:o&&o.dest});const l=this.initialBookmark,c=G.get("defaultZoomValue");let u=c?`zoom=${c}`:null,p=null,h=G.get("sidebarViewOnLoad"),f=G.get("scrollModeOnLoad"),g=G.get("spreadModeOnLoad");n.page&&a!==Be&&(u=`page=${n.page}&zoom=${c||n.zoom},`+`${n.scrollLeft},${n.scrollTop}`,p=parseInt(n.rotation,10),h===W.UNKNOWN&&(h=0|n.sidebarView),f===z.UNKNOWN&&(f=0|n.scrollMode),g===H.UNKNOWN&&(g=0|n.spreadMode)),r&&h===W.UNKNOWN&&(h=function(e){switch(e){case"UseNone":return W.NONE;case"UseThumbs":return W.THUMBS;case"UseOutlines":return W.OUTLINE;case"UseAttachments":return W.ATTACHMENTS;case"UseOC":return W.LAYERS}return W.NONE}(r)),i&&g===H.UNKNOWN&&(g=Ot(i)),this.setInitialView(u,{rotation:p,sidebarView:h,scrollMode:f,spreadMode:g}),this.eventBus.dispatch("documentinit",{source:this}),this.isViewerEmbedded||s.focus(),this._initializePermissions(e),await Promise.race([d,new Promise(e=>{setTimeout(e,1e4)})]),(l||u)&&(s.hasEqualPageSizes||(this.initialBookmark=l,s.currentScaleValue=s.currentScaleValue,this.setInitialView(u)))}).catch(()=>{this.setInitialView()}).then(function(){s.update()})}),d.then(()=>{this._initializeAutoPrint(e,r)}),l.then(()=>{if(e.getOutline().then(t=>{this.pdfOutlineViewer.render({outline:t,pdfDocument:e})}),e.getAttachments().then(e=>{this.pdfAttachmentViewer.render({attachments:e})}),s.optionalContentConfigPromise.then(t=>{this.pdfLayerViewer.render({optionalContentConfig:t,pdfDocument:e})}),"requestIdleCallback"in window){const t=window.requestIdleCallback(()=>{this._collectTelemetry(e),this._idleCallbacks.delete(t)},{timeout:1e3});this._idleCallbacks.add(t)}this._initializeJavaScript(e)}),this._initializePageLabels(e),this._initializeMetadata(e)},async _initializeJavaScript(e){if(!G.get("enableScripting"))return;const[n,i,r]=await Promise.all([e.getFieldObjects(),e.getCalculationOrderIds(),e.getJSActions()]);if(!n&&!r)return;if(e!==this.pdfDocument)return;const o=this.externalServices.createScripting(void 0===t||t.test("!PRODUCTION || GENERIC || CHROME")?{sandboxBundleSrc:G.get("sandboxBundleSrc")}:null),s=new Map,a=new Map;if(this._scriptingInstance={scripting:o,ready:!1,internalEvents:s,domEvents:a},!this.documentInfo&&(await new Promise(e=>{this.eventBus._on("metadataloaded",t=>{e()},{once:!0})}),e!==this.pdfDocument))return;if(!this._contentLength&&(await new Promise(e=>{this.eventBus._on("documentloaded",t=>{e()},{once:!0})}),e!==this.pdfDocument))return;s.set("updatefromsandbox",({detail:t})=>{const{id:n,command:i,value:r}=t;if(!n){switch(i){case"clear":console.clear();break;case"error":console.error(r);break;case"layout":this.pdfViewer.spreadMode=Ot(r);break;case"page-num":this.pdfViewer.currentPageNumber=r+1;break;case"print":this.pdfViewer.pagesPromise.then(()=>{this.triggerPrinting()});break;case"println":console.log(r);break;case"zoom":this.pdfViewer.currentScaleValue=r}return}const o=document.getElementById(n);o?o.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:t})):void 0!==r&&null!==r&&e.annotationStorage.setValue(n,r)});const l=new Map;s.set("pageopen",({pageNumber:t,actionsPromise:n})=>{l.set(t,(async()=>{let i=null;(l.has(t)||(i=await n,e===this.pdfDocument))&&await this._scriptingInstance&&this._scriptingInstance.scripting.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:t,actions:i})})())}),s.set("pageclose",async({pageNumber:t})=>{const n=l.get(t);n&&(l.set(t,null),await n,e===this.pdfDocument&&await this._scriptingInstance&&this._scriptingInstance.scripting.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:t}))});s.set("dispatcheventinsandbox",({detail:e})=>{o.dispatchEventInSandbox(e)});a.set("mousedown",e=>{this._mouseState.isDown=!0});a.set("mouseup",e=>{this._mouseState.isDown=!1});for(const[e,t]of s)this.eventBus._on(e,t);for(const[e,t]of a)window.addEventListener(e,t);try{await o.createSandbox({objects:n,calculationOrder:i,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...this.documentInfo,baseURL:this.baseUrl,filesize:this._contentLength,filename:this._docFilename,metadata:this.metadata&&this.metadata.getRaw(),authors:this.metadata&&this.metadata.get("dc:creator"),numPages:e.numPages,URL:this.url,actions:r}}),this.externalServices.isInAutomation&&this.eventBus.dispatch("sandboxcreated",{source:this})}catch(e){return console.error(`_initializeJavaScript: "${e&&e.message}".`),void this._destroyScriptingInstance()}await o.dispatchEventInSandbox({id:"doc",name:"Open"}),await this.pdfViewer.initializeScriptingEvents(),Promise.resolve().then(()=>{this._scriptingInstance&&(this._scriptingInstance.ready=!0)})},async _collectTelemetry(e){const t=await this.pdfDocument.getMarkInfo();if(e!==this.pdfDocument)return;const n=t&&t.Marked||!1;this.externalServices.reportTelemetry({type:"tagged",tagged:n})},async _initializeAutoPrint(e,t){const[n,i]=await Promise.all([t,G.get("enableScripting")?null:e.getJavaScript()]);if(e!==this.pdfDocument)return;let r=!1;if(n&&"Print"===n.action&&(r=!0),i&&(i.some(e=>!!e&&(console.warn("Warning: JavaScript is not supported"),this._delayedFallback(ae.javaScript),!0)),!r))for(const e of i)if(e&&C.test(e)){r=!0;break}r&&this.triggerPrinting()},async _initializeMetadata(e){const{info:t,metadata:n,contentDispositionFilename:i,contentLength:r}=await e.getMetadata();if(e!==this.pdfDocument)return;let o;this.documentInfo=t,this.metadata=n,this._contentDispositionFilename=i,this._contentLength||(this._contentLength=r),console.log(`PDF ${e.fingerprint} [${t.PDFFormatVersion} `+`${(t.Producer||"-").trim()} / ${(t.Creator||"-").trim()}] `+`(PDF.js: ${le||"-"}`+`${this.pdfViewer.enableWebGL?" [WebGL]":""})`);const s=t&&t.Title;s&&(o=s);const a=n&&n.get("dc:title");a&&("Untitled"===a||/[\uFFF0-\uFFFF]/g.test(a)||(o=a)),o?this.setTitle(`${o} - ${i||document.title}`):i&&this.setTitle(i),t.IsXFAPresent&&!t.IsAcroFormPresent?(console.warn("Warning: XFA is not supported"),this._delayedFallback(ae.forms)):!t.IsAcroFormPresent&&!t.IsXFAPresent||this.pdfViewer.renderInteractiveForms||(console.warn("Warning: Interactive form support is not enabled"),this._delayedFallback(ae.forms));let l="other";Ae.includes(t.PDFFormatVersion)&&(l=`v${t.PDFFormatVersion.replace(".","_")}`);let d="other";if(t.Producer){const e=t.Producer.toLowerCase();Oe.some(function(t){return!!e.includes(t)&&(d=t.replace(/[ .-]/g,"_"),!0)})}let c=null;t.IsXFAPresent?c="xfa":t.IsAcroFormPresent&&(c="acroform"),this.externalServices.reportTelemetry({type:"documentInfo",version:l,generator:d,formType:c}),this.eventBus.dispatch("metadataloaded",{source:this})},async _initializePageLabels(e){const t=await e.getPageLabels();if(e!==this.pdfDocument)return;if(!t||G.get("disablePageLabels"))return;const n=t.length;if(n!==this.pagesCount)return void console.error("The number of Page Labels does not match the number of pages in the document.");let i=0;for(;i<n&&t[i]===(i+1).toString();)i++;if(i===n)return;const{pdfViewer:r,pdfThumbnailViewer:o,toolbar:s}=this;r.setPageLabels(t),o.setPageLabels(t),s.setPagesCount(n,!0),s.setPageNumber(r.currentPageNumber,r.currentPageLabel)},_initializePdfHistory({fingerprint:e,viewOnLoad:t,initialDest:n=null}){this.isViewerEmbedded||G.get("disableHistory")||(this.pdfHistory.initialize({fingerprint:e,resetHistory:t===Be,updateUrl:G.get("historyUpdateUrl")}),this.pdfHistory.initialBookmark&&(this.initialBookmark=this.pdfHistory.initialBookmark,this.initialRotation=this.pdfHistory.initialRotation),n&&!this.initialBookmark&&t===Ne&&(this.initialBookmark=JSON.stringify(n),this.pdfHistory.push({explicitDest:n,pageNumber:null})))},async _initializePermissions(e){const t=await e.getPermissions();e===this.pdfDocument&&t&&G.get("enablePermissions")&&(t.includes(re.COPY)||this.appConfig.viewerContainer.classList.add(Me))},_initializeAnnotationStorageCallbacks(e){if(e!==this.pdfDocument)return;const{annotationStorage:t}=e;t.onSetModified=function(){window.addEventListener("beforeunload",At)},t.onResetModified=function(){window.removeEventListener("beforeunload",At)}},setInitialView(e,{rotation:t,sidebarView:n,scrollMode:i,spreadMode:r}={}){const o=e=>{D(e)&&(this.pdfViewer.pagesRotation=e)};this.isInitialViewSet=!0,this.pdfSidebar.setInitialView(n),((e,t)=>{I(e)&&(this.pdfViewer.scrollMode=e),M(t)&&(this.pdfViewer.spreadMode=t)})(i,r),this.initialBookmark?(o(this.initialRotation),delete this.initialRotation,this.pdfLinkService.setHash(this.initialBookmark),this.initialBookmark=null):e&&(o(t),this.pdfLinkService.setHash(e)),this.toolbar.setPageNumber(this.pdfViewer.currentPageNumber,this.pdfViewer.currentPageLabel),this.secondaryToolbar.setPageNumber(this.pdfViewer.currentPageNumber),this.pdfViewer.currentScaleValue||(this.pdfViewer.currentScaleValue=T)},cleanup(){this.pdfDocument&&(this.pdfViewer.cleanup(),this.pdfThumbnailViewer.cleanup(),this.pdfViewer.renderer!==U.SVG&&this.pdfDocument.cleanup())},forceRendering(){this.pdfRenderingQueue.printing=!!this.printService,this.pdfRenderingQueue.isThumbnailViewEnabled=this.pdfSidebar.isThumbnailViewVisible,this.pdfRenderingQueue.renderHighestPriority()},beforePrint(){if(this._scriptingInstance&&this._scriptingInstance.scripting.dispatchEventInSandbox({id:"doc",name:"WillPrint"}),this.printService)return;if(!this.supportsPrinting)return void this.l10n.get("printing_not_supported",null,"Warning: Printing is not fully supported by this browser.").then(e=>{this.error(e)});if(!this.pdfViewer.pageViewsReady)return void this.l10n.get("printing_not_ready",null,"Warning: The PDF is not fully loaded for printing.").then(e=>{window.alert(e)});const e=this.pdfViewer.getPagesOverview(),t=this.appConfig.printContainer,n=G.get("printResolution"),i=this.pdfViewer.optionalContentConfigPromise,r=xt.instance.createPrintService(this.pdfDocument,e,t,n,i,this.l10n);this.printService=r,this.forceRendering(),r.layout(),this.externalServices.reportTelemetry({type:"print"})},afterPrint(){this._scriptingInstance&&this._scriptingInstance.scripting.dispatchEventInSandbox({id:"doc",name:"DidPrint"}),this.printService&&(this.printService.destroy(),this.printService=null,this.pdfDocument&&this.pdfDocument.annotationStorage.resetModified()),this.forceRendering()},rotatePages(e){if(!this.pdfDocument)return;const t=(this.pdfViewer.pagesRotation+360+e)%360;this.pdfViewer.pagesRotation=t},requestPresentationMode(){this.pdfPresentationMode&&this.pdfPresentationMode.request()},triggerPrinting(){this.supportsPrinting&&window.print()},bindEvents(){const{eventBus:e,_boundEvents:n}=this;n.beforePrint=this.beforePrint.bind(this),n.afterPrint=this.afterPrint.bind(this),e._on("resize",tt),e._on("hashchange",nt),e._on("beforeprint",n.beforePrint),e._on("afterprint",n.afterPrint),e._on("pagerendered",qe),e._on("updateviewarea",Je),e._on("pagechanging",Vt),e._on("scalechanging",Ct),e._on("rotationchanging",Tt),e._on("sidebarviewchanged",Xe),e._on("pagemode",$e),e._on("namedaction",Ze),e._on("presentationmodechanged",Qe),e._on("presentationmode",it),e._on("print",rt),e._on("download",ot),e._on("save",st),e._on("firstpage",at),e._on("lastpage",lt),e._on("nextpage",dt),e._on("previouspage",ct),e._on("zoomin",ut),e._on("zoomout",pt),e._on("zoomreset",ht),e._on("pagenumberchanged",ft),e._on("scalechanged",gt),e._on("rotatecw",mt),e._on("rotateccw",wt),e._on("optionalcontentconfig",bt),e._on("switchscrollmode",vt),e._on("scrollmodechanged",Ye),e._on("switchspreadmode",Pt),e._on("spreadmodechanged",et),e._on("documentproperties",_t),e._on("find",yt),e._on("findfromurlhash",St),e._on("updatefindmatchescount",kt),e._on("updatefindcontrolstate",Et),G.get("pdfBug")&&(n.reportPageStatsPDFBug=Ge,e._on("pagerendered",n.reportPageStatsPDFBug),e._on("pagechanging",n.reportPageStatsPDFBug)),(void 0===t||t.test("GENERIC"))&&(e._on("fileinputchange",He),e._on("openfile",Ke))},bindWindowEvents(){const{eventBus:e,_boundEvents:t}=this;t.windowResize=(()=>{e.dispatch("resize",{source:window})}),t.windowHashChange=(()=>{e.dispatch("hashchange",{source:window,hash:document.location.hash.substring(1)})}),t.windowBeforePrint=(()=>{e.dispatch("beforeprint",{source:window})}),t.windowAfterPrint=(()=>{e.dispatch("afterprint",{source:window})}),t.windowUpdateFromSandbox=(t=>{e.dispatch("updatefromsandbox",{source:window,detail:t.detail})}),window.addEventListener("visibilitychange",Lt),window.addEventListener("wheel",It,{passive:!1}),window.addEventListener("touchstart",Mt,{passive:!1}),window.addEventListener("click",Nt),window.addEventListener("keydown",Rt),window.addEventListener("keyup",Bt),window.addEventListener("resize",t.windowResize),window.addEventListener("hashchange",t.windowHashChange),window.addEventListener("beforeprint",t.windowBeforePrint),window.addEventListener("afterprint",t.windowAfterPrint),window.addEventListener("updatefromsandbox",t.windowUpdateFromSandbox)},unbindEvents(){const{eventBus:e,_boundEvents:n}=this;e._off("resize",tt),e._off("hashchange",nt),e._off("beforeprint",n.beforePrint),e._off("afterprint",n.afterPrint),e._off("pagerendered",qe),e._off("updateviewarea",Je),e._off("pagechanging",Vt),e._off("scalechanging",Ct),e._off("rotationchanging",Tt),e._off("sidebarviewchanged",Xe),e._off("pagemode",$e),e._off("namedaction",Ze),e._off("presentationmodechanged",Qe),e._off("presentationmode",it),e._off("print",rt),e._off("download",ot),e._off("save",st),e._off("firstpage",at),e._off("lastpage",lt),e._off("nextpage",dt),e._off("previouspage",ct),e._off("zoomin",ut),e._off("zoomout",pt),e._off("zoomreset",ht),e._off("pagenumberchanged",ft),e._off("scalechanged",gt),e._off("rotatecw",mt),e._off("rotateccw",wt),e._off("optionalcontentconfig",bt),e._off("switchscrollmode",vt),e._off("scrollmodechanged",Ye),e._off("switchspreadmode",Pt),e._off("spreadmodechanged",et),e._off("documentproperties",_t),e._off("find",yt),e._off("findfromurlhash",St),e._off("updatefindmatchescount",kt),e._off("updatefindcontrolstate",Et),n.reportPageStatsPDFBug&&(e._off("pagerendered",n.reportPageStatsPDFBug),e._off("pagechanging",n.reportPageStatsPDFBug),n.reportPageStatsPDFBug=null),(void 0===t||t.test("GENERIC"))&&(e._off("fileinputchange",He),e._off("openfile",Ke)),n.beforePrint=null,n.afterPrint=null},unbindWindowEvents(){const{_boundEvents:e}=this;window.removeEventListener("visibilitychange",Lt),window.removeEventListener("wheel",It,{passive:!1}),window.removeEventListener("touchstart",Mt,{passive:!1}),window.removeEventListener("click",Nt),window.removeEventListener("keydown",Rt),window.removeEventListener("keyup",Bt),window.removeEventListener("resize",e.windowResize),window.removeEventListener("hashchange",e.windowHashChange),window.removeEventListener("beforeprint",e.windowBeforePrint),window.removeEventListener("afterprint",e.windowAfterPrint),window.removeEventListener("updatefromsandbox",e.windowUpdateFromSandbox),e.windowResize=null,e.windowHashChange=null,e.windowBeforePrint=null,e.windowAfterPrint=null,e.windowUpdateFromSandbox=null},accumulateWheelTicks(e){(this._wheelUnusedTicks>0&&e<0||this._wheelUnusedTicks<0&&e>0)&&(this._wheelUnusedTicks=0),this._wheelUnusedTicks+=e;const t=Math.sign(this._wheelUnusedTicks)*Math.floor(Math.abs(this._wheelUnusedTicks));return this._wheelUnusedTicks-=t,t},get scriptingReady(){return this._scriptingInstance&&this._scriptingInstance.ready||!1}};let ze,We,He,Ke;if(void 0===t||t.test("GENERIC")){const e=["null","http://mozilla.github.io","https://mozilla.github.io"];ze=function(t){if(void 0!==t)try{const n=new URL(window.location.href).origin||"null";if(e.includes(n))return;const{origin:i,protocol:r}=new URL(t,window.location.href);if(i!==n&&"blob:"!==r)throw new Error("file origin does not match viewer's")}catch(e){const t=e&&e.message;throw Ue.l10n.get("loading_error",null,"An error occurred while loading the PDF.").then(e=>{Ue.error(e,{message:t})}),e}}}function Ge({pageNumber:e}){if("undefined"==typeof Stats||!Stats.enabled)return;const t=Ue.pdfViewer.getPageView(e-1),n=t&&t.pdfPage&&t.pdfPage.stats;n&&Stats.add(e,n)}function je(){const e=Ue.appConfig;let n;if(void 0===t||t.test("GENERIC")){const e=document.location.search.substring(1),t=O(e);n="file"in t?t.file:G.get("defaultUrl"),ze(n)}else t.test("MOZCENTRAL")?n=window.location.href:t.test("CHROME")&&(n=G.get("defaultUrl"));if(void 0===t||t.test("GENERIC")){const t=document.createElement("input");t.id=e.openFileInputName,t.className="fileInput",t.setAttribute("type","file"),t.oncontextmenu=R,document.body.appendChild(t),window.File&&window.FileReader&&window.FileList&&window.Blob?t.value=null:(e.toolbar.openFile.setAttribute("hidden","true"),e.secondaryToolbar.openFileButton.setAttribute("hidden","true")),t.addEventListener("change",function(e){const t=e.target.files;t&&0!==t.length&&Ue.eventBus.dispatch("fileinputchange",{source:this,fileInput:e.target})}),e.mainContainer.addEventListener("dragover",function(e){e.preventDefault(),e.dataTransfer.dropEffect="move"}),e.mainContainer.addEventListener("drop",function(e){e.preventDefault();const t=e.dataTransfer.files;t&&0!==t.length&&Ue.eventBus.dispatch("fileinputchange",{source:this,fileInput:e.dataTransfer})})}else e.toolbar.openFile.setAttribute("hidden","true"),e.secondaryToolbar.openFileButton.setAttribute("hidden","true");Ue.supportsDocumentFonts||(G.set("disableFontFace",!0),Ue.l10n.get("web_fonts_disabled",null,"Web fonts are disabled: unable to use embedded PDF fonts.").then(e=>{console.warn(e)})),Ue.supportsPrinting||(e.toolbar.print.classList.add("hidden"),e.secondaryToolbar.printButton.classList.add("hidden")),Ue.supportsFullscreen||(e.toolbar.presentationModeButton.classList.add("hidden"),e.secondaryToolbar.presentationModeButton.classList.add("hidden")),Ue.supportsIntegratedFind&&e.toolbar.viewFind.classList.add("hidden"),e.mainContainer.addEventListener("transitionend",function(e){e.target===this&&Ue.eventBus.dispatch("resize",{source:this})},!0);try{We(n)}catch(e){Ue.l10n.get("loading_error",null,"An error occurred while loading the PDF.").then(t=>{Ue.error(t,e)})}}function qe({pageNumber:e,timestamp:t,error:n}){if(e===Ue.page&&Ue.toolbar.updateLoadingIndicatorState(!1),Ue.pdfSidebar.isThumbnailViewVisible){const t=Ue.pdfViewer.getPageView(e-1),n=Ue.pdfThumbnailViewer.getThumbnail(e-1);t&&n&&n.setImage(t)}n&&Ue.l10n.get("rendering_error",null,"An error occurred while rendering the page.").then(e=>{Ue.error(e,n)}),Ue.externalServices.reportTelemetry({type:"pageInfo",timestamp:t}),Ue.pdfDocument.getStats().then(function(e){Ue.externalServices.reportTelemetry({type:"documentStats",stats:e})})}function $e({mode:e}){let t;switch(e){case"thumbs":t=W.THUMBS;break;case"bookmarks":case"outline":t=W.OUTLINE;break;case"attachments":t=W.ATTACHMENTS;break;case"layers":t=W.LAYERS;break;case"none":t=W.NONE;break;default:return void console.error('Invalid "pagemode" hash parameter: '+e)}Ue.pdfSidebar.switchView(t,!0)}function Ze(e){switch(e.action){case"GoToPage":Ue.appConfig.toolbar.pageNumber.select();break;case"Find":Ue.supportsIntegratedFind||Ue.findBar.toggle();break;case"Print":Ue.triggerPrinting();break;case"SaveAs":st()}}function Qe(e){Ue.pdfViewer.presentationModeState=e.state}function Xe(e){Ue.pdfRenderingQueue.isThumbnailViewEnabled=Ue.pdfSidebar.isThumbnailViewVisible;const t=Ue.store;t&&Ue.isInitialViewSet&&t.set("sidebarView",e.view).catch(function(){})}function Je(e){const t=e.location,n=Ue.store;n&&Ue.isInitialViewSet&&n.setMultiple({page:t.pageNumber,zoom:t.scale,scrollLeft:t.left,scrollTop:t.top,rotation:t.rotation}).catch(function(){});const i=Ue.pdfLinkService.getAnchorUrl(t.pdfOpenParams);Ue.appConfig.toolbar.viewBookmark.href=i,Ue.appConfig.secondaryToolbar.viewBookmarkButton.href=i;const r=Ue.pdfViewer.getPageView(Ue.page-1),o=(r&&r.renderingState)!==pe.FINISHED;Ue.toolbar.updateLoadingIndicatorState(o)}function Ye(e){const t=Ue.store;t&&Ue.isInitialViewSet&&t.set("scrollMode",e.mode).catch(function(){})}function et(e){const t=Ue.store;t&&Ue.isInitialViewSet&&t.set("spreadMode",e.mode).catch(function(){})}function tt(){const{pdfDocument:e,pdfViewer:t}=Ue;if(!e)return;const n=t.currentScaleValue;"auto"!==n&&"page-fit"!==n&&"page-width"!==n||(t.currentScaleValue=n),t.update()}function nt(e){const t=e.hash;t&&(Ue.isInitialViewSet?Ue.pdfHistory.popStateInProgress||Ue.pdfLinkService.setHash(t):Ue.initialBookmark=t)}function it(){Ue.requestPresentationMode()}function rt(){Ue.triggerPrinting()}function ot(){Ue.downloadOrSave({sourceEventType:"download"})}function st(){Ue.downloadOrSave({sourceEventType:"save"})}function at(){Ue.pdfDocument&&(Ue.page=1)}function lt(){Ue.pdfDocument&&(Ue.page=Ue.pagesCount)}function dt(){Ue.pdfViewer.nextPage()}function ct(){Ue.pdfViewer.previousPage()}function ut(){Ue.zoomIn()}function pt(){Ue.zoomOut()}function ht(){Ue.zoomReset()}function ft(e){const t=Ue.pdfViewer;""!==e.value&&Ue.pdfLinkService.goToPage(e.value),e.value!==t.currentPageNumber.toString()&&e.value!==t.currentPageLabel&&Ue.toolbar.setPageNumber(t.currentPageNumber,t.currentPageLabel)}function gt(e){Ue.pdfViewer.currentScaleValue=e.value}function mt(){Ue.rotatePages(90)}function wt(){Ue.rotatePages(-90)}function bt(e){Ue.pdfViewer.optionalContentConfigPromise=e.promise}function vt(e){Ue.pdfViewer.scrollMode=e.mode}function Pt(e){Ue.pdfViewer.spreadMode=e.mode}function _t(){Ue.pdfDocumentProperties.open()}function yt(e){Ue.findController.executeCommand("find"+e.type,{query:e.query,phraseSearch:e.phraseSearch,caseSensitive:e.caseSensitive,entireWord:e.entireWord,highlightAll:e.highlightAll,findPrevious:e.findPrevious})}function St(e){Ue.findController.executeCommand("find",{query:e.query,phraseSearch:e.phraseSearch,caseSensitive:!1,entireWord:!1,highlightAll:!0,findPrevious:!1})}function kt({matchesCount:e}){Ue.supportsIntegratedFind?Ue.externalServices.updateFindMatchesCount(e):Ue.findBar.updateResultsCount(e)}function Et({state:e,previous:t,matchesCount:n,rawQuery:i}){Ue.supportsIntegratedFind?Ue.externalServices.updateFindControlState({result:e,findPrevious:t,matchesCount:n,rawQuery:i}):Ue.findBar.updateUIState(e,t,n)}function Ct(e){Ue.toolbar.setPageScale(e.presetValue,e.scale),Ue.pdfViewer.update()}function Tt(e){Ue.pdfThumbnailViewer.pagesRotation=e.pagesRotation,Ue.forceRendering(),Ue.pdfViewer.currentPageNumber=e.pageNumber}function Vt({pageNumber:e,pageLabel:t}){Ue.toolbar.setPageNumber(e,t),Ue.secondaryToolbar.setPageNumber(e),Ue.pdfSidebar.isThumbnailViewVisible&&Ue.pdfThumbnailViewer.scrollThumbnailIntoView(e)}function Lt(e){"visible"===document.visibilityState&&Dt()}We=void 0===t||t.test("GENERIC")?function(e){if(e&&0===e.lastIndexOf("file:",0)){Ue.setTitleUsingUrl(e);const t=new XMLHttpRequest;return t.onload=function(){Ue.open(new Uint8Array(t.response))},t.open("GET",e),t.responseType="arraybuffer",void t.send()}e&&Ue.open(e)}:t.test("MOZCENTRAL || CHROME")?function(e){Ue.setTitleUsingUrl(e),Ue.initPassiveLoading()}:function(e){if(e)throw new Error("Not implemented: webViewerOpenFileViaURL")},(void 0===t||t.test("GENERIC"))&&(He=function(e){if(Ue.pdfViewer&&Ue.pdfViewer.isInPresentationMode)return;const t=e.fileInput.files[0];if(Fe.disableCreateObjectURL){Ue.setTitleUsingUrl(t.name);const e=new FileReader;e.onload=function(e){const t=e.target.result;Ue.open(new Uint8Array(t))},e.readAsArrayBuffer(t)}else{let e=URL.createObjectURL(t);t.name&&(e={url:e,originalUrl:t.name}),Ue.open(e)}const n=Ue.appConfig;n.toolbar.viewBookmark.setAttribute("hidden","true"),n.secondaryToolbar.viewBookmarkButton.setAttribute("hidden","true"),n.toolbar.download.setAttribute("hidden","true"),n.secondaryToolbar.downloadButton.setAttribute("hidden","true")},Ke=function(e){const t=Ue.appConfig.openFileInputName;document.getElementById(t).click()});let Ft=null;function Dt(){Ft&&clearTimeout(Ft),Ft=setTimeout(function(){Ft=null},Ie)}function It(e){const{pdfViewer:t,supportedMouseWheelZoomModifierKeys:n}=Ue;if(!t.isInPresentationMode)if(e.ctrlKey&&n.ctrlKey||e.metaKey&&n.metaKey){if(e.preventDefault(),Ft||"hidden"===document.visibilityState)return;const n=t.currentScale,i=A(e);let r=0;if(e.deltaMode===WheelEvent.DOM_DELTA_LINE||e.deltaMode===WheelEvent.DOM_DELTA_PAGE)r=Math.abs(i)>=1?Math.sign(i):Ue.accumulateWheelTicks(i);else{const e=30;r=Ue.accumulateWheelTicks(i/e)}r<0?Ue.zoomOut(-r):r>0&&Ue.zoomIn(r);const o=t.currentScale;if(n!==o){const i=o/n-1,r=t.container.getBoundingClientRect(),s=e.clientX-r.left,a=e.clientY-r.top;t.container.scrollLeft+=s*i,t.container.scrollTop+=a*i}}else Dt()}function Mt(e){e.touches.length>1&&e.preventDefault()}function Nt(e){if(Ue.triggerDelayedFallback&&Ue.pdfViewer.containsElement(e.target)&&Ue.triggerDelayedFallback(),!Ue.secondaryToolbar.isOpen)return;const t=Ue.appConfig;(Ue.pdfViewer.containsElement(e.target)||t.toolbar.container.contains(e.target)&&e.target!==t.secondaryToolbar.toggleButton)&&Ue.secondaryToolbar.close()}function Bt(e){9===e.keyCode&&Ue.triggerDelayedFallback&&Ue.triggerDelayedFallback()}function Rt(e){if(Ue.overlayManager.active)return;let n=!1,i=!1;const r=(e.ctrlKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.metaKey?8:0),o=Ue.pdfViewer,s=o&&o.isInPresentationMode;if(1===r||8===r||5===r||12===r)switch(e.keyCode){case 70:Ue.supportsIntegratedFind||e.shiftKey||(Ue.findBar.open(),n=!0);break;case 71:if(!Ue.supportsIntegratedFind){const e=Ue.findController.state;e&&Ue.findController.executeCommand("findagain",{query:e.query,phraseSearch:e.phraseSearch,caseSensitive:e.caseSensitive,entireWord:e.entireWord,highlightAll:e.highlightAll,findPrevious:5===r||12===r}),n=!0}break;case 61:case 107:case 187:case 171:s||Ue.zoomIn(),n=!0;break;case 173:case 109:case 189:s||Ue.zoomOut(),n=!0;break;case 48:case 96:s||(setTimeout(function(){Ue.zoomReset()}),n=!1);break;case 38:(s||Ue.page>1)&&(Ue.page=1,n=!0,i=!0);break;case 40:(s||Ue.page<Ue.pagesCount)&&(Ue.page=Ue.pagesCount,n=!0,i=!0)}if(void 0===t||t.test("GENERIC || CHROME")){const{eventBus:i}=Ue;if(1===r||8===r)switch(e.keyCode){case 83:i.dispatch("download",{source:window}),n=!0;break;case 79:(void 0===t||t.test("GENERIC"))&&(i.dispatch("openfile",{source:window}),n=!0)}}if(3===r||10===r)switch(e.keyCode){case 80:Ue.requestPresentationMode(),n=!0;break;case 71:Ue.appConfig.toolbar.pageNumber.select(),n=!0}if(n)return i&&!s&&o.focus(),void e.preventDefault();const a=L(),l=a&&a.tagName.toUpperCase();if(!("INPUT"===l||"TEXTAREA"===l||"SELECT"===l||a&&a.isContentEditable)||27===e.keyCode){if(0===r){let t=0,r=!1;switch(e.keyCode){case 38:case 33:o.isVerticalScrollbarEnabled&&(r=!0),t=-1;break;case 8:s||(r=!0),t=-1;break;case 37:o.isHorizontalScrollbarEnabled&&(r=!0);case 75:case 80:t=-1;break;case 27:Ue.secondaryToolbar.isOpen&&(Ue.secondaryToolbar.close(),n=!0),!Ue.supportsIntegratedFind&&Ue.findBar.opened&&(Ue.findBar.close(),n=!0);break;case 40:case 34:o.isVerticalScrollbarEnabled&&(r=!0),t=1;break;case 13:case 32:s||(r=!0),t=1;break;case 39:o.isHorizontalScrollbarEnabled&&(r=!0);case 74:case 78:t=1;break;case 36:(s||Ue.page>1)&&(Ue.page=1,n=!0,i=!0);break;case 35:(s||Ue.page<Ue.pagesCount)&&(Ue.page=Ue.pagesCount,n=!0,i=!0);break;case 83:Ue.pdfCursorTools.switchTool(de.SELECT);break;case 72:Ue.pdfCursorTools.switchTool(de.HAND);break;case 82:Ue.rotatePages(90);break;case 115:Ue.pdfSidebar.toggle()}0===t||r&&"page-fit"!==o.currentScaleValue||(t>0?o.nextPage():o.previousPage(),n=!0)}if(4===r)switch(e.keyCode){case 13:case 32:if(!s&&"page-fit"!==o.currentScaleValue)break;Ue.page>1&&Ue.page--,n=!0;break;case 82:Ue.rotatePages(-90)}n||s||(e.keyCode>=33&&e.keyCode<=40||32===e.keyCode&&"BUTTON"!==l)&&(i=!0),i&&!o.containsElement(a)&&o.focus(),n&&e.preventDefault()}}function At(e){return e.preventDefault(),e.returnValue="",!1}function Ot(e){switch(e){case"SinglePage":case"OneColumn":return H.NONE;case"TwoColumnLeft":case"TwoPageLeft":return H.ODD;case"TwoColumnRight":case"TwoPageRight":return H.EVEN}return H.NONE}const xt={instance:{supportsPrinting:!1,createPrintService(){throw new Error("Not implemented: createPrintService")}}};return{DefaultExternalServices:xe,PDFPrintServiceFactory:xt,PDFViewerApplication:Ue}});
//# sourceMappingURL=sourcemaps/app.js.map
