/**
 * skylark-pdfjs-viewer - A version of video.js that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["./pdfjs_dev"],function(t){const e="--loadingBar-end-offset",n={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2},i={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};const o={getLanguage:async()=>"en-us",getDirection:async()=>"ltr",get:async(t,e,n)=>(function(t,e){return e?t.replace(/\{\{\s*(\w+)\s*\}\}/g,(t,n)=>n in e?e[n]:"{{"+n+"}}"):t})(n,e),async translate(t){}};function r(t,e){let n=0,i=t.length-1;if(i<0||!e(t[i]))return t.length;if(e(t[n]))return n;for(;n<i;){const o=n+i>>1;e(t[o])?i=o:n=o+1}return n}function s(t,e,n){if(t<2)return t;let i=e[t].div,o=i.offsetTop+i.clientTop;o>=n&&(o=(i=e[t-1].div).offsetTop+i.clientTop);for(let n=t-2;n>=0&&!((i=e[n].div).offsetTop+i.clientTop+i.clientHeight<=o);--n)t=n;return t}function l(t){let e=Math.sqrt(t.deltaX*t.deltaX+t.deltaY*t.deltaY);const n=Math.atan2(t.deltaY,t.deltaX);return-.25*Math.PI<n&&n<.75*Math.PI&&(e=-e),e}const c={EVENT:"event",TIMEOUT:"timeout"};const a=new Promise(function(e){void 0!==t&&t.test("LIB && TESTING")&&"undefined"==typeof window?setTimeout(e,20):window.requestAnimationFrame(e)});function u(e,n=null){if(void 0!==t&&!t.test("MOZCENTRAL"))throw new Error("Not implemented: dispatchDOMEvent");const i=Object.create(null);if(n&&n.length>0){const t=n[0];for(const e in t){const n=t[e];if("source"!==e)i[e]=n;else if(n===window||n===document)return}}const o=document.createEvent("CustomEvent");o.initCustomEvent(e,!0,!0,i),document.dispatchEvent(o)}class f{constructor(e){this._listeners=Object.create(null),(void 0===t||t.test("MOZCENTRAL"))&&(this._isInAutomation=e&&!0===e.isInAutomation)}on(t,e,n=null){this._on(t,e,{external:!0,once:n&&n.once})}off(t,e,n=null){this._off(t,e,{external:!0,once:n&&n.once})}dispatch(e){const n=this._listeners[e];if(!n||0===n.length){if((void 0===t||t.test("MOZCENTRAL"))&&this._isInAutomation){const t=Array.prototype.slice.call(arguments,1);u(e,t)}return}const i=Array.prototype.slice.call(arguments,1);let o;n.slice(0).forEach(({listener:t,external:n,once:r})=>{r&&this._off(e,t),n?(o||(o=[])).push(t):t.apply(null,i)}),o&&(o.forEach(t=>{t.apply(null,i)}),o=null),(void 0===t||t.test("MOZCENTRAL"))&&this._isInAutomation&&u(e,i)}_on(t,e,n=null){(this._listeners[t]||(this._listeners[t]=[])).push({listener:e,external:n&&!0===n.external,once:n&&!0===n.once})}_off(t,e,n=null){const i=this._listeners[t];if(i)for(let t=0,n=i.length;t<n;t++)if(i[t].listener===e)return void i.splice(t,1)}}return{animationStarted:a,approximateFraction:function(t){if(Math.floor(t)===t)return[t,1];const e=1/t;if(e>8)return[1,8];if(Math.floor(e)===e)return[1,e];const n=t>1?e:t;let i,o=0,r=1,s=1,l=1;for(;;){const t=o+s,e=r+l;if(e>8)break;n<=t/e?(s=t,l=e):(o=t,r=e)}return i=n-o/r<s/l-n?n===t?[o,r]:[r,o]:n===t?[s,l]:[l,s]},AutoPrintRegExp:/\bprint\s*\(/,backtrackBeforeAllVisibleElements:s,binarySearchFirstItem:r,CSS_UNITS:96/72,DEFAULT_SCALE:1,DEFAULT_SCALE_VALUE:"auto",EventBus:f,getActiveOrFocusedElement:function(){let t=document,e=t.activeElement||t.querySelector(":focus");for(;e&&e.shadowRoot;)e=(t=e.shadowRoot).activeElement||t.querySelector(":focus");return e},getOutputScale:function(t){const e=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.backingStorePixelRatio||1);return{sx:e,sy:e,scaled:1!==e}},getPageSizeInches:function({view:t,userUnit:e,rotate:n}){const[i,o,r,s]=t,l=n%180!=0,c=(r-i)/72*e,a=(s-o)/72*e;return{width:l?a:c,height:l?c:a}},getPDFFileNameFromURL:function(t,e="document.pdf"){if("string"!=typeof t)return e;if(function(t){let e=0;const n=t.length;for(;e<n&&""===t[e].trim();)e++;return"data:"===t.substring(e,e+5).toLowerCase()}(t))return console.warn('getPDFFileNameFromURL: ignoring "data:" URL for performance reasons.'),e;const n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(t);let o=n.exec(i[1])||n.exec(i[2])||n.exec(i[3]);if(o&&(o=o[0]).includes("%"))try{o=n.exec(decodeURIComponent(o))[0]}catch(t){}return o||e},getVisibleElements:function({scrollEl:t,views:e,sortByVisibility:n=!1,horizontal:i=!1,rtl:o=!1}){const l=t.scrollTop,c=l+t.clientHeight,a=t.scrollLeft,u=a+t.clientWidth,f=[],d=e.length;let h=r(e,i?function(t){const e=t.div,n=e.offsetLeft+e.clientLeft,i=n+e.clientWidth;return o?n<u:i>a}:function(t){const e=t.div;return e.offsetTop+e.clientTop+e.clientHeight>l});h>0&&h<d&&!i&&(h=s(h,e,l));let p=i?u:-1;for(let t=h;t<d;t++){const n=e[t],o=n.div,r=o.offsetLeft+o.clientLeft,s=o.offsetTop+o.clientTop,d=o.clientWidth,h=o.clientHeight,m=r+d,v=s+h;if(-1===p)v>=c&&(p=v);else if((i?r:s)>p)break;if(v<=l||s>=c||m<=a||r>=u)continue;const E=Math.max(0,l-s)+Math.max(0,v-c),N=(d-(Math.max(0,a-r)+Math.max(0,m-u)))/d,g=(h-E)/h*N*100|0;f.push({id:n.id,x:r,y:s,view:n,percent:g,widthPercent:100*N|0})}const m=f[0],v=f[f.length-1];return n&&f.sort(function(t,e){const n=t.percent-e.percent;return Math.abs(n)>.001?-n:t.id-e.id}),{first:m,last:v,views:f}},isPortraitOrientation:function(t){return t.width<=t.height},isValidRotation:function(t){return Number.isInteger(t)&&t%90==0},isValidScrollMode:function(t){return Number.isInteger(t)&&Object.values(n).includes(t)&&t!==n.UNKNOWN},isValidSpreadMode:function(t){return Number.isInteger(t)&&Object.values(i).includes(t)&&t!==i.UNKNOWN},MAX_AUTO_SCALE:1.25,MAX_SCALE:10,MIN_SCALE:.1,moveToEndOfArray:function(t,e){const n=[],i=t.length;let o=0;for(let r=0;r<i;++r)e(t[r])?n.push(t[r]):(t[o]=t[r],++o);for(let e=0;o<i;++e,++o)t[o]=n[e]},noContextMenuHandler:function(t){t.preventDefault()},normalizeWheelEventDelta:function(t){let e=l(t);return 0===t.deltaMode?e/=900:1===t.deltaMode&&(e/=30),e},normalizeWheelEventDirection:l,NullL10n:o,parseQueryString:function(t){const e=t.split("&"),n=Object.create(null);for(let t=0,i=e.length;t<i;++t){const i=e[t].split("="),o=i[0].toLowerCase(),r=i.length>1?i[1]:null;n[decodeURIComponent(o)]=decodeURIComponent(r)}return n},PresentationModeState:{UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3},ProgressBar:class{constructor(t,{height:e,width:n,units:i}={}){this.visible=!0,this.div=document.querySelector(t+" .progress"),this.bar=this.div.parentNode,this.height=e||100,this.width=n||100,this.units=i||"%",this.div.style.height=this.height+this.units,this.percent=0}_updateBar(){if(this._indeterminate)return this.div.classList.add("indeterminate"),void(this.div.style.width=this.width+this.units);this.div.classList.remove("indeterminate");const t=this.width*this._percent/100;this.div.style.width=t+this.units}get percent(){return this._percent}set percent(t){var e,n,i;this._indeterminate=isNaN(t),this._percent=(e=t,n=0,i=100,Math.min(Math.max(e,n),i)),this._updateBar()}setWidth(t){if(!t)return;const n=t.parentNode.offsetWidth-t.offsetWidth;n>0&&document.documentElement.style.setProperty(e,`${n}px`)}hide(){this.visible&&(this.visible=!1,this.bar.classList.add("hidden"))}show(){this.visible||(this.visible=!0,this.bar.classList.remove("hidden"))}},RendererType:{CANVAS:"canvas",SVG:"svg"},roundToDivide:function(t,e){const n=t%e;return 0===n?t:Math.round(t-n+e)},SCROLLBAR_PADDING:40,scrollIntoView:function(t,e,n=!1){let i=t.offsetParent;if(!i)return void console.error("offsetParent is not set -- cannot scroll");let o=t.offsetTop+t.clientTop,r=t.offsetLeft+t.clientLeft;for(;i.clientHeight===i.scrollHeight&&i.clientWidth===i.scrollWidth||n&&"hidden"===getComputedStyle(i).overflow;)if(i.dataset._scaleY&&(o/=i.dataset._scaleY,r/=i.dataset._scaleX),o+=i.offsetTop,r+=i.offsetLeft,!(i=i.offsetParent))return;e&&(void 0!==e.top&&(o+=e.top),void 0!==e.left&&(r+=e.left,i.scrollLeft=r)),i.scrollTop=o},ScrollMode:n,SidebarView:{UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4},SpreadMode:i,TextLayerMode:{DISABLE:0,ENABLE:1,ENABLE_ENHANCE:2},UNKNOWN_SCALE:0,VERTICAL_PADDING:5,waitOnEventOrTimeout:function({target:t,name:e,delay:n=0}){return new Promise(function(i,o){if("object"!=typeof t||!e||"string"!=typeof e||!(Number.isInteger(n)&&n>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function r(n){t instanceof f?t._off(e,s):t.removeEventListener(e,s),a&&clearTimeout(a),i(n)}const s=r.bind(null,c.EVENT);t instanceof f?t._on(e,s):t.addEventListener(e,s);const l=r.bind(null,c.TIMEOUT),a=setTimeout(l,n)})},WaitOnType:c,watchScroll:function(t,e){const n=function(n){o||(o=window.requestAnimationFrame(function(){o=null;const n=t.scrollLeft,r=i.lastX;n!==r&&(i.right=n>r),i.lastX=n;const s=t.scrollTop,l=i.lastY;s!==l&&(i.down=s>l),i.lastY=s,e(i)}))},i={right:!0,down:!0,lastX:t.scrollLeft,lastY:t.scrollTop,_eventHandler:n};let o=null;return t.addEventListener("scroll",n,!0),i}}});
//# sourceMappingURL=sourcemaps/ui_utils.js.map
